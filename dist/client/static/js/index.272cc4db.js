!function(){var e,t,r,a,n,i,l,o,s,d,u,c,p={94542:function(e,t,r){"use strict";let a=r("84526").Z;t.Z=a},85836:function(e,t,r){"use strict";let a=r("41175").Z;t.Z=a},11303:function(e,t,r){"use strict";let a=r("10439").Z;t.Z=a},54017:function(e,t,r){"use strict";let a=r("56795").Z;t.Z=a},39209:function(e,t,r){"use strict";let a=r("75624").Z;t.Z=a},74966:function(e,t,r){"use strict";var a=r("20905");r("84286");let n=(0,r("9572").default)(a.Z,[["__scopeId","data-v-3e2252b4"]]);t.Z=n},99944:function(e,t,r){"use strict";let a=r("35208").Z;t.Z=a},73505:function(e,t,r){"use strict";let a=r("85409").Z;t.Z=a},69833:function(e,t,r){"use strict";let a=r("72306").Z;t.Z=a},6185:function(e,t,r){"use strict";let a=r("58029").Z;t.Z=a},39532:function(e,t,r){"use strict";let a=r("41526").Z;t.Z=a},84526:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("58777")},41175:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("40841")},10439:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("49044")},56795:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("77132")},20905:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("89440")},35208:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("18775")},85409:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("70748")},72306:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("70699")},41526:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("39581")},58777:function(e,t,r){"use strict";r("1056"),r("66364"),r("31907"),r("67475"),r("64072"),r("87395"),r("34210"),r("19608"),r("18936"),r("54335"),r("11160"),r("75698");var a=r("26463"),n=r("78276"),i=r("35818"),l=r("86367"),o=r("74966"),s=r("73505"),d=r("6185"),u=r("85836"),c=r("54017"),p=r("11303"),g=r("69833"),v=r("39532"),m=r("998"),x=r("68277"),f=r("63819"),b=r("39294");let y={key:1,class:"h-screen flex flex-col bg-app-bg-light dark:bg-app-bg-dark overflow-hidden transition-colors duration-200"},h={class:"bg-app-surface-light dark:bg-app-surface-dark border-b border-border-light dark:border-border-dark px-6 py-3 shadow-sm flex items-center justify-between transition-colors duration-200"},k={class:"flex items-center gap-4"},w=["title"],_={key:0,class:"text-2xl"},C={key:1,class:"text-2xl"},D={key:0,class:"text-green-600 font-medium flex items-center gap-2"},S={key:1,class:"text-orange-500 font-medium flex items-center gap-2 animate-pulse"},Z={key:2,class:"text-purple-600 font-medium flex items-center gap-2"},H={key:3,class:"text-blue-600 font-medium flex items-center gap-2"},q={class:"flex-1 flex overflow-hidden relative"},E={key:0,class:"absolute inset-0 flex items-center justify-center bg-app-surface-light dark:bg-app-surface-dark z-10 text-text-primary-light dark:text-text-primary-dark transition-colors duration-200"},z={key:1,class:"absolute inset-0 flex items-center justify-center bg-app-surface-light dark:bg-app-surface-dark z-10 text-red-600 transition-colors duration-200"},U={key:2,class:"absolute inset-0 flex flex-col items-center justify-center bg-app-surface-light dark:bg-app-surface-dark z-10 space-y-4 transition-colors duration-200"},T={key:0,class:"text-lg font-medium text-claude-primary dark:text-claude-primary-dark"},j={key:1,class:"text-sm text-text-secondary-light dark:text-text-secondary-dark"},A={key:3,class:"absolute inset-0 flex flex-col items-center justify-center bg-app-surface-light dark:bg-app-surface-dark z-10 space-y-4 transition-colors duration-200"},V={class:"flex-1 overflow-y-auto px-6 lg:px-12"},L={class:"max-w-5xl mx-auto py-12"},F={class:"mb-6"},O={key:0,class:"mb-4 px-4 py-3 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200 text-sm flex items-center justify-between"},W={class:"w-[30%] min-w-[320px] max-w-[480px] shadow-2xl z-10"},N={key:0,class:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-center justify-center p-4 transition-colors duration-200"},P={class:"bg-app-surface-light dark:bg-app-surface-dark rounded-lg shadow-xl w-full max-w-md p-6 transition-colors duration-200"},I={class:"flex items-center justify-between mb-4"},K={class:"bg-app-surface-alt-light dark:bg-app-surface-alt-dark p-3 rounded border border-border-light dark:border-border-dark mb-4 text-sm italic text-text-secondary-light dark:text-text-secondary-dark max-h-32 overflow-y-auto transition-colors duration-200"},$={class:"flex justify-end gap-3"},R=["disabled"],Y={class:"text-xs opacity-70"},M={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-pulse"};t.Z=(0,a.aZ)({__name:"App",setup(e){let t=(0,l.iH)(window.location.pathname),r=(0,a.Fl)(()=>"/settings"===t.value);window.addEventListener("popstate",()=>{t.value=window.location.pathname});let B=(0,l.iH)(""),Q=(0,l.iH)(""),J=(0,l.iH)([]),G=(0,l.iH)(!0),X=(0,l.iH)("open"),ee=(0,l.iH)(""),et=(0,l.iH)(null),er=(0,l.iH)(!1),ea=null,en=(0,l.iH)([]),ei=(0,l.iH)(""),el=(0,l.iH)(""),eo=(0,l.iH)(!1),es=(0,l.iH)(null),ed=(0,l.iH)(!1),eu=(0,l.iH)(""),ec=(0,l.iH)(!1),ep=(0,l.iH)(3),eg=null,{notifyVersionUpdated:ev,notifyQuestionsUpdated:em,notifyTimeoutWarning:ex}=(0,f.l)(),{loadConfig:ef}=(0,b.Z)(),eb=null,ey=null;function eh(){ey&&(clearTimeout(ey),ey=null),eb=null}let ek=(0,l.iH)(!1),ew=(0,l.iH)(!1),e_=null,eC=(0,l.iH)(!1),eD=(0,l.iH)(null),eS=(0,a.Fl)(()=>"changes_requested"===X.value||"approved"===X.value),eZ=(0,a.Fl)(()=>"approved"===X.value),eH=(0,a.Fl)(()=>"changes_requested"===X.value),eq=(0,a.Fl)(()=>"discussing"===X.value),eE=(0,l.iH)(!1);function ez(){eE.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",eE.value?"dark":"light")}function eU(){eE.value=!eE.value,ez()}(0,a.YP)(eE,ez);let eT=(0,l.iH)(!1),ej=(0,l.iH)(""),eA=(0,l.iH)(null),eV=(0,l.iH)(null),eL=(0,l.iH)(""),eF=(0,l.iH)(null),eO=(0,a.Fl)(()=>navigator.platform.toUpperCase().includes("MAC")),eW=(0,a.Fl)(()=>eO.value?"\u2318\u21B5":"Ctrl+\u21B5");(0,a.YP)(eT,e=>{e&&(0,a.Y3)(()=>{var e;null===(e=eF.value)||void 0===e||e.focus()})});async function eN(e){ei.value=e.version.versionHash,Q.value=e.content,el.value=e.version.versionHash;try{let e=await fetch(`/api/reviews/${B.value}/versions`);if(e.ok){let t=await e.json();en.value=t.versions}}catch{-1===en.value.findIndex(t=>t.versionHash===e.version.versionHash)&&en.value.push({versionHash:e.version.versionHash,createdAt:e.version.createdAt,changeDescription:e.version.changeDescription,author:e.version.author,isCurrent:!0,hasSameContent:!0}),en.value=en.value.map(t=>({...t,isCurrent:t.versionHash===e.version.versionHash,hasSameContent:t.versionHash===e.version.versionHash||t.hasSameContent}))}for(let t of e.resolvedComments){let e=J.value.find(e=>e.id===t.commentId);e&&(e.resolved=!0)}console.log("[App] Version updated:",e.version.versionHash.substring(0,8)),ev(e.version.versionHash)}(0,a.bv)(async()=>{!function(){let e=localStorage.getItem("theme");e?eE.value="dark"===e:eE.value=window.matchMedia("(prefers-color-scheme: dark)").matches,ez()}();let e=window.location.pathname.split("/"),t=e.find((t,r)=>"review"===e[r-1]);if(!t){ee.value="Invalid URL: No Review ID found.",G.value=!1;return}B.value=t});let{isConnected:eP,disconnect:eI}=(0,m.D)(B,{onConnected:function(e){let t=e.review;if(Q.value=t.planContent,J.value=t.comments||[],ei.value=t.currentVersion,el.value=t.currentVersion,X.value=t.status||"open",t.documentVersions){var r;let e=(null===(r=t.documentVersions.find(e=>e.versionHash===t.currentVersion))||void 0===r?void 0:r.content)||"";en.value=t.documentVersions.map(r=>({versionHash:r.versionHash,createdAt:r.createdAt,changeDescription:r.changeDescription,author:r.author,isCurrent:r.versionHash===t.currentVersion,hasSameContent:r.content===e}))}ed.value=!0,G.value=!1,ef().catch(()=>{}),"approved"!==t.status&&(eb=Date.now(),ey=window.setTimeout(()=>{ex(Math.ceil((6e5-(Date.now()-(eb||0)))/6e4))},48e4))},onStatusChanged:function(e){X.value=e.status,console.log("[App] Status changed:",e.previousStatus,"->",e.status),"approved"===e.status&&(eh(),function(){ep.value=3,eg=window.setInterval(()=>{ep.value--,ep.value<=0&&(eg&&(clearInterval(eg),eg=null),window.close())},1e3)}())},onVersionUpdated:eN,onQuestionsUpdated:function(e){for(let t of e.questions){let e=J.value.find(e=>e.id===t.commentId);e&&(e.question=t.question,"accepted"===t.question.type&&(e.resolved=!0))}console.log("[App] Questions updated:",e.questions.length,"questions"),e.questions.length>0&&em(e.questions.length)},onError:()=>{console.warn("[App] SSE connection error")}});async function eK(){let e=await fetch(`/api/reviews/${B.value}`);if(!e.ok)throw Error("Review not found");let t=await e.json();if(Q.value=t.planContent,J.value=t.comments||[],ei.value=t.currentVersion,el.value=t.currentVersion,X.value=t.status||"open",t.documentVersions){var r;let e=(null===(r=t.documentVersions.find(e=>e.versionHash===t.currentVersion))||void 0===r?void 0:r.content)||"";en.value=t.documentVersions.map(r=>({versionHash:r.versionHash,createdAt:r.createdAt,changeDescription:r.changeDescription,author:r.author,isCurrent:r.versionHash===t.currentVersion,hasSameContent:r.content===e}))}}async function e$(e){if(e===ei.value){el.value=e,Q.value=await eR(e)||Q.value;return}let t=await eR(e);t&&(el.value=e,Q.value=t)}async function eR(e){try{let t=await fetch(`/api/reviews/${B.value}/versions/${e}`);if(!t.ok)return null;return(await t.json()).content}catch{return null}}async function eY(e,t){try{let r=await fetch(`/api/reviews/${B.value}/diff?from=${e}&to=${t}`);if(!r.ok){alert("Failed to load diff");return}es.value=await r.json(),eo.value=!0}catch{alert("Error loading diff")}}async function eM(e){try{if(!(await fetch(`/api/reviews/${B.value}/rollback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({versionHash:e})})).ok){alert("Failed to rollback");return}await eK()}catch{alert("Error during rollback")}}function eB(e){ej.value=e.quote,eA.value=e.position,eV.value=e.boundingRect,eL.value="",eT.value=!0}function eQ(e){eL.value.trim()?eL.value+="\n"+e.content:eL.value=e.content}async function eJ(){if(eL.value.trim()&&eA.value)try{let e=await fetch(`/api/reviews/${B.value}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quote:ej.value,comment:eL.value,position:eA.value})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to add comment")}let t=await e.json();J.value.push(t),eT.value=!1,eA.value=null,eV.value=null}catch(e){alert(`Error adding comment: ${e.message}`)}}function eG(e){(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),eJ())}async function eX(e,t){try{if(!(await fetch(`/api/reviews/${B.value}/comments/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:t})})).ok)throw Error("Failed");let r=J.value.findIndex(t=>t.id===e);-1!==r&&(J.value[r].comment=t)}catch(e){alert("Error updating comment")}}async function e0(e){if(confirm("Delete this comment?"))try{if(!(await fetch(`/api/reviews/${B.value}/comments/${e}`,{method:"DELETE"})).ok)throw Error("Failed");J.value=J.value.filter(t=>t.id!==e)}catch(e){alert("Error deleting comment")}}async function e1(){if(!er.value){er.value=!0,ea=window.setTimeout(()=>{er.value=!1,ea=null},3e3);return}ea&&(clearTimeout(ea),ea=null),er.value=!1;try{let e=J.value.filter(e=>!e.resolved),t=eu.value.trim();if(0!==e.length||t){if(ec.value){let e={passThrough:!0};if(t&&(e.note=t,eu.value=""),!(await fetch(`/api/reviews/${B.value}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to approve with suggestions")}else{let e={};if(t&&(e.note=t,eu.value=""),!(await fetch(`/api/reviews/${B.value}/request-changes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to request changes")}}else if(!(await fetch(`/api/reviews/${B.value}/approve`,{method:"POST"})).ok)throw Error("Failed to approve")}catch(e){alert("Error submitting review")}}async function e2(e,t){try{if(!(await fetch(`/api/reviews/${B.value}/comments/${e}/answer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:t})})).ok)throw Error("Failed to submit answer");let r=J.value.find(t=>t.id===e);r&&(r.answer=t)}catch(e){alert("Error submitting answer")}}function e3(e){if(et.value=et.value===e?null:e,et.value===e){let t=document.querySelector(`mark[data-comment-id="${e}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}}function e4(e){et.value=et.value===e?null:e}function e6(e){eC.value=!!e,eD.value=e}function e5(){if(!eS.value&&!G.value&&!eZ.value&&!eH.value){if(!ew.value){ew.value=!0,e_=window.setTimeout(()=>{ew.value=!1,e_=null},3e3);return}e_&&(clearTimeout(e_),e_=null),ew.value=!1,e1()}}(0,a.Ah)(()=>{ea&&(clearTimeout(ea),ea=null),eg&&(clearInterval(eg),eg=null),eh()});let e8=(0,a.Fl)(()=>en.value.findIndex(e=>e.versionHash===el.value)),{register:e7,isMac:e9}=(0,x.v5)(),te=[];return(0,a.bv)(()=>{te.push(e7({key:"p",modifiers:{mod:!0,shift:!0},handler:e5,description:"Approve / Submit Review",group:"Review"})),te.push(e7({key:"c",handler:()=>{eC.value&&eD.value&&!eS.value&&eB(eD.value)},description:"Add comment to selected text",group:"Comments"})),te.push(e7({key:"ArrowLeft",handler:()=>{let e=e8.value;e>0&&en.value.length>1&&e$(en.value[e-1].versionHash)},description:"Previous version",group:"Navigation"})),te.push(e7({key:"ArrowRight",handler:()=>{let e=e8.value;e<en.value.length-1&&e$(en.value[e+1].versionHash)},description:"Next version",group:"Navigation"})),te.push(e7({key:"?",handler:()=>{ek.value=!0},description:"Show keyboard shortcuts",group:"General"})),te.push(e7({key:"/",modifiers:{mod:!0},handler:()=>{ek.value=!0},description:"Show keyboard shortcuts",group:"General"})),te.push(e7({key:"Escape",handler:()=>{ek.value?ek.value=!1:eT.value?eT.value=!1:eo.value&&(eo.value=!1,es.value=null)},description:"Close modal / dialog",group:"General",enableInInput:!0}))}),(0,a.Ah)(()=>{te.forEach(e=>e()),e_&&(clearTimeout(e_),e_=null)}),(e,t)=>r.value?((0,a.wg)(),(0,a.j4)(v.Z,{key:0})):((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("header",h,[t[12]||(t[12]=(0,a._)("h1",{class:"font-bold text-lg text-text-primary-light dark:text-text-primary-dark"},"Claude Plan Review",-1)),(0,a._)("div",k,[t[11]||(t[11]=(0,a._)("a",{href:"/settings",class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-text-secondary-light dark:text-text-secondary-dark hover:text-text-primary-light dark:hover:text-text-primary-dark",title:"Settings"},[(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,a._)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),(0,a._)("circle",{cx:"12",cy:"12",r:"3"})])],-1)),(0,a._)("button",{onClick:eU,class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:eE.value?"Switch to Light Mode":"Switch to Dark Mode"},[eE.value?((0,a.wg)(),(0,a.iD)("span",_,"\u2600\uFE0F")):((0,a.wg)(),(0,a.iD)("span",C,"\uD83C\uDF19"))],8,w),"approved"===X.value?((0,a.wg)(),(0,a.iD)("div",D,[...t[7]||(t[7]=[(0,a._)("span",null,"\u2713 Approved",-1)])])):"changes_requested"===X.value?((0,a.wg)(),(0,a.iD)("div",S,[...t[8]||(t[8]=[(0,a._)("span",null,"\u23F3 Waiting for Agent...",-1)])])):"discussing"===X.value?((0,a.wg)(),(0,a.iD)("div",Z,[...t[9]||(t[9]=[(0,a._)("span",null,"\u2753 Questions from Agent",-1)])])):"updated"===X.value?((0,a.wg)(),(0,a.iD)("div",H,[...t[10]||(t[10]=[(0,a._)("span",null,"\uD83D\uDCDD New Revision Available",-1)])])):(0,a.kq)("",!0)])]),(0,a._)("main",q,[G.value?((0,a.wg)(),(0,a.iD)("div",E," Loading... ")):ee.value?((0,a.wg)(),(0,a.iD)("div",z,(0,n.zw)(ee.value),1)):eZ.value?((0,a.wg)(),(0,a.iD)("div",U,[t[13]||(t[13]=(0,a._)("div",{class:"text-4xl mb-2"},"\uD83C\uDF89",-1)),t[14]||(t[14]=(0,a._)("h2",{class:"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark"},"Plan Approved!",-1)),t[15]||(t[15]=(0,a._)("p",{class:"text-text-secondary-light dark:text-text-secondary-dark"},"You can close this window and return to Claude.",-1)),ep.value>0?((0,a.wg)(),(0,a.iD)("p",T," Window closing in "+(0,n.zw)(ep.value)+"s... ",1)):((0,a.wg)(),(0,a.iD)("p",j,' Type "continue" in the chat. '))])):eH.value?((0,a.wg)(),(0,a.iD)("div",A,[...t[16]||(t[16]=[(0,a._)("div",{class:"text-4xl mb-2 animate-bounce"},"\u23F3",-1),(0,a._)("h2",{class:"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark"},"Feedback Submitted",-1),(0,a._)("p",{class:"text-text-secondary-light dark:text-text-secondary-dark"},"Waiting for Agent to process your feedback...",-1),(0,a._)("p",{class:"text-sm text-text-secondary-light dark:text-text-secondary-dark"},"This page will update automatically.",-1)])])):((0,a.wg)(),(0,a.iD)(a.HY,{key:4},[(0,a._)("div",V,[(0,a._)("div",L,[(0,a._)("div",F,[(0,a.Wm)(d.Z,{versions:en.value,"current-version":ei.value,"selected-version":el.value,onSelectVersion:e$,onCompareVersions:eY,onRollback:eM},null,8,["versions","current-version","selected-version"])]),el.value!==ei.value?((0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("span",null," You are viewing a historical version ("+(0,n.zw)(el.value.substring(0,8))+"). Comments are not editable in this view. ",1),(0,a._)("button",{onClick:t[0]||(t[0]=e=>e$(ei.value)),class:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors text-xs"}," Back to Current ")])):(0,a.kq)("",!0),(0,a.Wm)(o.Z,{content:Q.value,comments:J.value,"active-comment-id":et.value,"is-historical-version":el.value!==ei.value,"current-version":el.value,onRequestComment:eB,onHighlightClick:e4,onSelectionChange:e6},null,8,["content","comments","active-comment-id","is-historical-version","current-version"])])]),(0,a._)("div",W,[(0,a.Wm)(s.Z,{comments:J.value,"confirm-pending":er.value,"review-status":X.value,"is-read-only":eS.value,"has-questions":eq.value,"approval-note":eu.value,"onUpdate:approvalNote":t[1]||(t[1]=e=>eu.value=e),"pass-through":ec.value,"onUpdate:passThrough":t[2]||(t[2]=e=>ec.value=e),onUpdateComment:eX,onDeleteComment:e0,onSubmitReview:e1,onSubmitWithNote:e1,onCommentClick:e3,onAnswerQuestion:e2},null,8,["comments","confirm-pending","review-status","is-read-only","has-questions","approval-note","pass-through"])])],64))]),eT.value?((0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("div",P,[(0,a._)("div",I,[t[17]||(t[17]=(0,a._)("h3",{class:"text-lg font-bold text-text-primary-light dark:text-text-primary-dark"},"Add Comment",-1)),(0,a.Wm)(g.Z,{onSelect:eQ})]),(0,a._)("div",K,' "'+(0,n.zw)(ej.value)+'" ',1),(0,a.wy)((0,a._)("textarea",{ref_key:"commentTextareaRef",ref:eF,"onUpdate:modelValue":t[3]||(t[3]=e=>eL.value=e),class:"w-full border border-border-light dark:border-border-dark rounded p-3 mb-4 focus:ring-2 focus:ring-claude-primary dark:focus:ring-claude-primary-dark outline-none bg-app-surface-light dark:bg-app-surface-dark text-text-primary-light dark:text-text-primary-dark transition-colors duration-200",rows:"4",placeholder:"Type your comment here...",onKeydown:eG},null,544),[[i.nr,eL.value]]),(0,a._)("div",$,[(0,a._)("button",{onClick:t[4]||(t[4]=e=>eT.value=!1),class:"px-4 py-2 text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors"}," Cancel "),(0,a._)("button",{onClick:eJ,class:"px-4 py-2 bg-claude-primary dark:bg-claude-primary-dark text-white rounded hover:bg-claude-primary-hover disabled:opacity-50 transition-colors flex items-center gap-2",disabled:!eL.value.trim()},[t[18]||(t[18]=(0,a.Uk)(" Add Comment ",-1)),(0,a._)("span",Y,(0,n.zw)(eW.value),1)],8,R)])])])):(0,a.kq)("",!0),eo.value&&es.value?((0,a.wg)(),(0,a.j4)(u.Z,{key:1,diff:es.value,onClose:t[5]||(t[5]=e=>{eo.value=!1,es.value=null})},null,8,["diff"])):(0,a.kq)("",!0),(0,a.Wm)(c.Z,{visible:ek.value,onClose:t[6]||(t[6]=e=>ek.value=!1)},null,8,["visible"]),(0,a.Wm)(i.uT,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:(0,a.w5)(()=>[ew.value?((0,a.wg)(),(0,a.iD)("div",M,[t[19]||(t[19]=(0,a._)("span",null,"Press",-1)),(0,a.Wm)(p.Z,{keys:"mod+shift+p",class:"!bg-red-800 !border-red-500"}),t[20]||(t[20]=(0,a._)("span",null,"again to confirm",-1))])):(0,a.kq)("",!0)]),_:1})]))}})},40841:function(e,t,r){"use strict";r("34210");var a=r("26463"),n=r("78276"),i=r("86367"),l=r("2341"),o=r("86358"),s=r("47136"),d=r("20309"),u=r("93040"),c=r("25822");let p={class:"diff-viewer fixed inset-0 z-50 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4"},g={class:"bg-app-surface-light dark:bg-app-surface-dark rounded-lg shadow-2xl w-full max-w-[90vw] max-h-[90vh] flex flex-col transition-colors duration-200"},v={class:"flex items-center justify-between px-6 py-4 border-b border-border-light dark:border-border-dark"},m={class:"flex items-center gap-4"},x={class:"flex items-center gap-2 text-sm"},f={class:"px-2 py-1 rounded bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 font-mono"},b={class:"px-2 py-1 rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 font-mono"},y={class:"flex items-center gap-4"},h={class:"flex items-center gap-3 text-sm"},k={class:"flex items-center gap-1 text-green-600 dark:text-green-400"},w={class:"flex items-center gap-1 text-red-600 dark:text-red-400"},_={class:"flex items-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"},C={class:"flex items-center rounded-lg border border-border-light dark:border-border-dark overflow-hidden"},D={class:"flex-1 overflow-auto"},S={key:0,class:"font-mono text-sm"},Z={class:"flex-shrink-0 w-20 flex text-text-secondary-light dark:text-text-secondary-dark text-xs select-none"},H={class:"w-10 px-2 py-1 text-right border-r border-border-light dark:border-border-dark"},q={class:"w-10 px-2 py-1 text-right border-r border-border-light dark:border-border-dark"},E={key:1,class:"flex font-mono text-sm h-full"},z={class:"flex-1 border-r border-border-light dark:border-border-dark overflow-auto"},U={class:"sticky top-0 px-4 py-2 bg-red-50 dark:bg-red-900/20 border-b border-border-light dark:border-border-dark text-xs text-red-700 dark:text-red-400 font-medium"},T={class:"flex-shrink-0 w-12 px-2 py-1 text-right text-xs text-text-secondary-light dark:text-text-secondary-dark border-r border-border-light dark:border-border-dark select-none"},j={class:"flex-1 overflow-auto"},A={class:"sticky top-0 px-4 py-2 bg-green-50 dark:bg-green-900/20 border-b border-border-light dark:border-border-dark text-xs text-green-700 dark:text-green-400 font-medium"},V={class:"flex-shrink-0 w-12 px-2 py-1 text-right text-xs text-text-secondary-light dark:text-text-secondary-dark border-r border-border-light dark:border-border-dark select-none"},L={class:"px-6 py-3 border-t border-border-light dark:border-border-dark flex justify-end"};t.Z=(0,a.aZ)({__name:"DiffViewer",props:{diff:{}},emits:["close"],setup(e,t){let{emit:r}=t,F=(0,i.iH)("split");function O(e){return e.substring(0,8)}let W=(0,a.Fl)(()=>{let t=[],r=[],a=0,n=e.diff.lines;for(;a<n.length;){let e=n[a];if("unchanged"===e.type)t.push(e),r.push(e),a++;else if("removed"===e.type){let e=[];for(;a<n.length&&"removed"===n[a].type;)e.push(n[a]),a++;let i=[];for(;a<n.length&&"added"===n[a].type;)i.push(n[a]),a++;let l=Math.max(e.length,i.length);for(let a=0;a<l;a++)t.push(a<e.length?e[a]:null),r.push(a<i.length?i[a]:null)}else"added"===e.type&&(t.push(null),r.push(e),a++)}return{left:t,right:r}});return(t,N)=>((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("div",g,[(0,a._)("div",v,[(0,a._)("div",m,[N[5]||(N[5]=(0,a._)("h2",{class:"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark"}," Version Comparison ",-1)),(0,a._)("div",x,[(0,a._)("code",f,(0,n.zw)(O(e.diff.fromVersion)),1),N[4]||(N[4]=(0,a._)("span",{class:"text-text-secondary-light dark:text-text-secondary-dark"},"\u2192",-1)),(0,a._)("code",b,(0,n.zw)(O(e.diff.toVersion)),1)])]),(0,a._)("div",y,[(0,a._)("div",h,[(0,a._)("span",k,[(0,a.Wm)((0,i.SU)(l.Z),{size:14}),(0,a.Uk)(" "+(0,n.zw)(e.diff.stats.additions),1)]),(0,a._)("span",w,[(0,a.Wm)((0,i.SU)(o.Z),{size:14}),(0,a.Uk)(" "+(0,n.zw)(e.diff.stats.deletions),1)]),(0,a._)("span",_,[(0,a.Wm)((0,i.SU)(s.Z),{size:14}),(0,a.Uk)(" "+(0,n.zw)(e.diff.stats.unchanged),1)])]),(0,a._)("div",C,[(0,a._)("button",{onClick:N[0]||(N[0]=e=>F.value="unified"),class:(0,n.C_)(["flex items-center gap-1.5 px-3 py-1.5 text-sm transition-colors","unified"===F.value?"bg-claude-primary text-white":"bg-transparent text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800"])},[(0,a.Wm)((0,i.SU)(d.Z),{size:14}),N[6]||(N[6]=(0,a.Uk)(" Unified ",-1))],2),(0,a._)("button",{onClick:N[1]||(N[1]=e=>F.value="split"),class:(0,n.C_)(["flex items-center gap-1.5 px-3 py-1.5 text-sm transition-colors","split"===F.value?"bg-claude-primary text-white":"bg-transparent text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800"])},[(0,a.Wm)((0,i.SU)(u.Z),{size:14}),N[7]||(N[7]=(0,a.Uk)(" Split ",-1))],2)]),(0,a._)("button",{onClick:N[2]||(N[2]=e=>r("close")),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-text-secondary-light dark:text-text-secondary-dark transition-colors"},[(0,a.Wm)((0,i.SU)(c.Z),{size:20})])])]),(0,a._)("div",D,["unified"===F.value?((0,a.wg)(),(0,a.iD)("div",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.diff.lines,(e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:(0,n.C_)(["flex border-b border-border-light/50 dark:border-border-dark/50","added"===e.type?"bg-green-50 dark:bg-green-900/20":"","removed"===e.type?"bg-red-50 dark:bg-red-900/20":""])},[(0,a._)("div",Z,[(0,a._)("span",H,(0,n.zw)(e.oldLineNumber||""),1),(0,a._)("span",q,(0,n.zw)(e.newLineNumber||""),1)]),(0,a._)("div",{class:(0,n.C_)(["flex-shrink-0 w-6 text-center py-1 select-none","added"===e.type?"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/40":"","removed"===e.type?"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/40":""])},(0,n.zw)("added"===e.type?"+":"removed"===e.type?"-":" "),3),(0,a._)("pre",{class:(0,n.C_)(["flex-1 py-1 px-4 whitespace-pre-wrap break-all","added"===e.type?"text-green-800 dark:text-green-200":"","removed"===e.type?"text-red-800 dark:text-red-200":"text-text-primary-light dark:text-text-primary-dark"])},(0,n.zw)(e.content),3)],2))),128))])):((0,a.wg)(),(0,a.iD)("div",E,[(0,a._)("div",z,[(0,a._)("div",U,(0,n.zw)(O(e.diff.fromVersion))+" (Base) ",1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(W.value.left,(e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:"left-"+t,class:(0,n.C_)(["flex border-b border-border-light/50 dark:border-border-dark/50 min-h-[28px]",(null==e?void 0:e.type)==="removed"?"bg-red-50 dark:bg-red-900/20":""])},[e?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("span",T,(0,n.zw)(e.oldLineNumber||""),1),(0,a._)("pre",{class:(0,n.C_)(["flex-1 py-1 px-4 whitespace-pre-wrap break-all","removed"===e.type?"text-red-800 dark:text-red-200":"text-text-primary-light dark:text-text-primary-dark"])},(0,n.zw)(e.content),3)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[N[8]||(N[8]=(0,a._)("span",{class:"flex-shrink-0 w-12 px-2 py-1 border-r border-border-light dark:border-border-dark"},null,-1)),N[9]||(N[9]=(0,a._)("span",{class:"flex-1 py-1 px-4 bg-gray-50 dark:bg-gray-800/50"},null,-1))],64))],2))),128))]),(0,a._)("div",j,[(0,a._)("div",A,(0,n.zw)(O(e.diff.toVersion))+" (Target) ",1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(W.value.right,(e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:"right-"+t,class:(0,n.C_)(["flex border-b border-border-light/50 dark:border-border-dark/50 min-h-[28px]",(null==e?void 0:e.type)==="added"?"bg-green-50 dark:bg-green-900/20":""])},[e?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("span",V,(0,n.zw)(e.newLineNumber||""),1),(0,a._)("pre",{class:(0,n.C_)(["flex-1 py-1 px-4 whitespace-pre-wrap break-all","added"===e.type?"text-green-800 dark:text-green-200":"text-text-primary-light dark:text-text-primary-dark"])},(0,n.zw)(e.content),3)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[N[10]||(N[10]=(0,a._)("span",{class:"flex-shrink-0 w-12 px-2 py-1 border-r border-border-light dark:border-border-dark"},null,-1)),N[11]||(N[11]=(0,a._)("span",{class:"flex-1 py-1 px-4 bg-gray-50 dark:bg-gray-800/50"},null,-1))],64))],2))),128))])]))]),(0,a._)("div",L,[(0,a._)("button",{onClick:N[3]||(N[3]=e=>r("close")),class:"px-4 py-2 bg-claude-primary dark:bg-claude-primary-dark text-white rounded-lg hover:bg-claude-primary-hover transition-colors"}," Close ")])])]))}})},49044:function(e,t,r){"use strict";r("64072"),r("87395");var a=r("26463"),n=r("78276"),i=r("68277");let l={class:"inline-flex items-center gap-0.5"},o={class:"inline-flex items-center justify-center min-w-[1.25rem] px-1.5 py-0.5 text-xs font-medium bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm text-text-secondary-light dark:text-text-secondary-dark"},s={key:0,class:"text-xs text-text-secondary-light dark:text-text-secondary-dark"};t.Z=(0,a.aZ)({__name:"Kbd",props:{keys:{}},setup(e){let t=(0,a.Fl)(()=>e.keys.toLowerCase().split("+").map(e=>{switch(e){case"mod":return i.V5.value?"\u2318":"Ctrl";case"shift":return i.V5.value?"\u21E7":"Shift";case"alt":return i.V5.value?"\u2325":"Alt";case"ctrl":return i.V5.value?"\u2303":"Ctrl";case"enter":return i.V5.value?"\u21B5":"Enter";case"space":return i.V5.value?"\u2423":"Space";case"esc":case"escape":return"Esc";case"arrowleft":case"left":return"\u2190";case"arrowright":case"right":return"\u2192";case"arrowup":case"up":return"\u2191";case"arrowdown":case"down":return"\u2193";case"backspace":return"\u232B";case"delete":return"\u2326";case"tab":return"\u21E5";default:return e.toUpperCase()}})),r=(0,a.Fl)(()=>i.V5.value?"":"+");return(e,i)=>((0,a.wg)(),(0,a.iD)("span",l,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,(e,i)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:i},[(0,a._)("kbd",o,(0,n.zw)(e),1),i<t.value.length-1&&r.value?((0,a.wg)(),(0,a.iD)("span",s,(0,n.zw)(r.value),1)):(0,a.kq)("",!0)],64))),128))]))}})},77132:function(e,t,r){"use strict";r("34210"),r("1056");var a=r("26463"),n=r("35818"),i=r("86367"),l=r("78276"),o=r("25822"),s=r("68277"),d=r("11303");let u={class:"flex items-center justify-between px-6 py-4 border-b border-border-light dark:border-border-dark"},c={class:"p-6 max-h-[70vh] overflow-y-auto"},p={class:"text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-3 uppercase tracking-wider"},g={class:"space-y-2"},v={class:"text-text-primary-light dark:text-text-primary-dark"},m={key:0,class:"text-center text-text-secondary-light dark:text-text-secondary-dark py-8"},x={class:"px-6 py-4 border-t border-border-light dark:border-border-dark bg-gray-50 dark:bg-gray-900/50 rounded-b-lg"},f={class:"text-xs text-text-secondary-light dark:text-text-secondary-dark text-center"};t.Z=(0,a.aZ)({__name:"KeyboardHelpModal",props:{visible:{type:Boolean}},emits:["close"],setup(e,t){let{emit:r}=t,{getBindingsByGroup:b,isMac:y}=(0,s.v5)(),h=(0,a.Fl)(()=>b()),k=["General","Review","Comments","Navigation"],w=(0,a.Fl)(()=>{let e=h.value,t=[];for(let r of k)e[r]&&t.push({name:r,bindings:e[r]});for(let r of Object.keys(e))!k.includes(r)&&t.push({name:r,bindings:e[r]});return t});return(t,s)=>((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.Wm)(n.uT,{"enter-active-class":"transition-opacity duration-150","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:(0,a.w5)(()=>[e.visible?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"fixed inset-0 z-50 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4",onClick:s[2]||(s[2]=(0,n.iM)(e=>r("close"),["self"])),onKeydown:s[3]||(s[3]=(0,n.D2)(e=>r("close"),["escape"]))},[(0,a._)("div",{class:"bg-app-surface-light dark:bg-app-surface-dark rounded-lg shadow-xl w-full max-w-lg",onClick:s[1]||(s[1]=(0,n.iM)(()=>{},["stop"]))},[(0,a._)("div",u,[s[4]||(s[4]=(0,a._)("h2",{class:"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark"}," Keyboard Shortcuts ",-1)),(0,a._)("button",{onClick:s[0]||(s[0]=e=>r("close")),class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 text-text-secondary-light dark:text-text-secondary-dark transition-colors"},[(0,a.Wm)((0,i.SU)(o.Z),{size:20})])]),(0,a._)("div",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.value,e=>((0,a.wg)(),(0,a.iD)("div",{key:e.name,class:"mb-6 last:mb-0"},[(0,a._)("h3",p,(0,l.zw)(e.name),1),(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.bindings,e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"flex items-center justify-between py-2 px-3 rounded hover:bg-gray-50 dark:hover:bg-gray-800/50"},[(0,a._)("span",v,(0,l.zw)(e.description),1),(0,a.Wm)(d.Z,{keys:function(e){let t=[],r=e.modifiers||{};return r.mod&&t.push("mod"),r.ctrl&&!r.mod&&t.push("ctrl"),r.shift&&t.push("shift"),r.alt&&t.push("alt"),t.push(e.key),t.join("+")}(e)},null,8,["keys"])]))),128))])]))),128)),0===w.value.length?((0,a.wg)(),(0,a.iD)("div",m," No keyboard shortcuts registered. ")):(0,a.kq)("",!0)]),(0,a._)("div",x,[(0,a._)("p",f,[s[5]||(s[5]=(0,a.Uk)(" Press ",-1)),(0,a.Wm)(d.Z,{keys:"esc"}),s[6]||(s[6]=(0,a.Uk)(" to close this dialog ",-1))])])])],32)):(0,a.kq)("",!0)]),_:1})]))}})},75624:function(e,t,r){"use strict";var a=r("26463"),n=r("86367"),i=r("78276"),l=r("82974");let o={class:"flex items-center justify-between py-2 px-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800"},s={class:"flex items-center gap-2"},d={class:"group relative"},u=["disabled"];t.Z=(0,a.aZ)({__name:"PassThroughSwitch",props:{modelValue:{type:Boolean},disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,t){let{emit:r}=t;return(t,c)=>((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",s,[c[2]||(c[2]=(0,a._)("span",{class:"text-sm text-amber-800 dark:text-amber-200"}," \u76F4\u63A5\u901A\u8FC7\u6A21\u5F0F ",-1)),(0,a._)("div",d,[(0,a.Wm)((0,n.SU)(l.Z),{size:14,class:"text-amber-600 dark:text-amber-400 cursor-help"}),c[1]||(c[1]=(0,a._)("div",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50"},[(0,a.Uk)(" \u5F00\u542F\u540E\uFF0C\u8BC4\u8BBA\u5C06\u4F5C\u4E3A\u5EFA\u8BAE\u4F20\u9012\u7ED9 Agent\uFF0C"),(0,a._)("br"),(0,a.Uk)("\u4F46\u4E0D\u4F1A\u963B\u6B62\u8BA1\u5212\u901A\u8FC7 ")],-1))])]),(0,a._)("button",{type:"button",onClick:c[0]||(c[0]=t=>r("update:modelValue",!e.modelValue)),disabled:e.disabled,class:(0,i.C_)(["relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2",e.modelValue?"bg-amber-500":"bg-gray-300 dark:bg-gray-600",e.disabled&&"opacity-50 cursor-not-allowed"])},[(0,a._)("span",{class:(0,i.C_)(["inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform",e.modelValue?"translate-x-4":"translate-x-0.5"])},null,2)],10,u)]))}})},89440:function(e,t,r){"use strict";r("18936"),r("54335"),r("67475"),r("11160"),r("75698");var a=r("26463"),n=r("78276"),i=r("86367"),l=r("9366"),o=r("9382"),s=r("3835"),d=r("82000"),u=r.n(d),c=r("15979"),p=r("82763"),g=r("66164"),v=r("72959"),m=r("13219"),x=r("84893"),f=r("2633"),b=r("33219"),y=r("95411"),h=r("90751"),k=r("25569"),w=r("86790");let _={class:"relative"},C=["innerHTML"];t.Z=(0,a.aZ)({__name:"PlanViewer",props:{content:{},comments:{},activeCommentId:{},isHistoricalVersion:{type:Boolean},currentVersion:{}},emits:["request-comment","highlight-click","selection-change"],setup(e,t){let{emit:r}=t;s.Z.registerLanguage("javascript",c.Z),s.Z.registerLanguage("typescript",p.Z),s.Z.registerLanguage("python",g.Z),s.Z.registerLanguage("java",v.Z),s.Z.registerLanguage("cpp",m.Z),s.Z.registerLanguage("rust",x.Z),s.Z.registerLanguage("go",f.Z),s.Z.registerLanguage("bash",b.Z),s.Z.registerLanguage("json",y.Z),s.Z.registerLanguage("xml",h.Z),s.Z.registerLanguage("html",h.Z),s.Z.registerLanguage("css",k.Z),s.Z.registerLanguage("sql",w.Z);let d=(0,i.iH)(null);function D(){d.value&&d.value.unmark({done:()=>{e.comments.filter(t=>t.documentVersion===e.currentVersion).forEach(e=>{var t;null===(t=d.value)||void 0===t||t.mark(e.quote,{className:"comment-highlight",acrossElements:!0,separateWordSearch:!1,each:t=>{t.dataset.commentId=e.id,t.addEventListener("click",()=>{r("highlight-click",e.id)})}})}),S()}})}function S(){document.querySelectorAll(".comment-highlight").forEach(t=>{t instanceof HTMLElement&&(e.activeCommentId&&t.dataset.commentId===e.activeCommentId?t.classList.add("active"):t.classList.remove("active"))})}(0,i.iH)(null),l.TU.setOptions({breaks:!0,gfm:!0});let Z=new l.TU.Renderer,H=Z.code.bind(Z);Z.code=function(e,t,r){if("mermaid"===t)return`<div class="mermaid">${e}</div>`;if(t&&s.Z.getLanguage(t))try{let r=s.Z.highlight(e,{language:t}).value;return`<pre class="hljs"><code class="language-${t}">${r}</code></pre>`}catch(e){console.error("Highlight error:",e)}return H(e,t,r)},l.TU.use({renderer:Z});let q=(0,a.Fl)(()=>l.TU.parse(e.content));async function E(){await (0,a.Y3)();let e=document.querySelectorAll(".mermaid");for(let t=0;t<e.length;t++){let r=e[t],a=r.textContent||"";try{let{svg:e}=await o.Z.render(`mermaid-${t}-${Date.now()}`,a);r.innerHTML=e}catch(e){console.error("Mermaid rendering error:",e),r.innerHTML=`<pre class="text-red-600">Error rendering diagram: ${e}</pre>`}}}(0,a.bv)(()=>{o.Z.initialize({startOnLoad:!1,theme:document.documentElement.classList.contains("dark")?"dark":"default",securityLevel:"loose"}),E(),(0,a.Y3)(()=>{let e=document.querySelector(".markdown-body");e&&(d.value=new(u())(e),D())})}),(0,a.YP)(()=>e.content,()=>{(0,a.Y3)(()=>{E();let e=document.querySelector(".markdown-body");e&&(d.value=new(u())(e),D())})}),(0,a.YP)(()=>e.comments,()=>{(0,a.Y3)(()=>{D()})},{deep:!0}),(0,a.YP)(()=>e.activeCommentId,()=>{S()}),(0,a.YP)(()=>e.currentVersion,()=>{(0,a.Y3)(()=>{D()})});let z=(0,i.iH)({top:"0px",left:"0px",display:"none"}),U=(0,i.iH)(""),T=(0,i.iH)(null);function j(t){let r=e.content.indexOf(t);if(-1===r){let r=t.replace(/\s+/g," "),a=e.content.replace(/\s+/g," ").indexOf(r);if(-1===a)return console.warn("Could not find quote in content:",t),{startOffset:0,endOffset:t.length};let n=0,i=0;for(;i<a&&n<e.content.length;){if(/\s/.test(e.content[n])){if(/\s/.test(e.content[n])){for(;n<e.content.length&&/\s/.test(e.content[n]);)n++;i++;continue}}else i++;n++}return{startOffset:n,endOffset:n+t.length}}return{startOffset:r,endOffset:r+t.length}}function A(){if(e.isHistoricalVersion){z.value.display="none",r("selection-change",null);return}let t=window.getSelection();if(!t||t.isCollapsed){z.value.display="none",r("selection-change",null);return}let a=t.toString().trim();if(!a){r("selection-change",null);return}let n=t.getRangeAt(0),i=n.commonAncestorContainer,l=i.nodeType===Node.TEXT_NODE?i.parentElement:i;if(null==l?void 0:l.closest(".comment-highlight")){z.value.display="none",r("selection-change",null);return}let o=n.getBoundingClientRect();z.value={top:`${o.top-40}px`,left:`${o.left}px`,display:"block"},U.value=a,T.value=n.cloneRange();let s=j(a);r("selection-change",{quote:a,position:s,boundingRect:o})}function V(){var e;if(!U.value||!T.value)return;let t=j(U.value),a=T.value.getBoundingClientRect();r("request-comment",{quote:U.value,position:t,boundingRect:a}),z.value.display="none",null===(e=window.getSelection())||void 0===e||e.removeAllRanges(),U.value="",T.value=null,r("selection-change",null)}return(t,r)=>((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("div",{class:(0,n.C_)(["markdown-body p-10 lg:p-12 bg-app-surface-light dark:bg-app-surface-dark shadow-md rounded-xl min-h-[80vh] transition-colors duration-200",e.isHistoricalVersion?"select-none cursor-default":""]),innerHTML:q.value,onMouseup:A},null,42,C),e.isHistoricalVersion||"none"===z.value.display?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,style:(0,n.j5)({top:z.value.top,left:z.value.left}),class:"fixed z-50 bg-claude-primary dark:bg-claude-primary-dark text-white px-4 py-2 rounded-full shadow-lg hover:bg-claude-primary-hover transition-colors text-sm font-medium flex items-center gap-2",onClick:V},[...r[0]||(r[0]=[(0,a._)("span",null,"\uD83D\uDCAC Comment",-1)])],4))]))}})},18775:function(e,t,r){"use strict";r("18936"),r("54335"),r("67475"),r("34210"),r("1056");var a=r("26463"),n=r("78276"),i=r("35818"),l=r("86367");let o={class:"question-input mt-3 p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800"},s={class:"text-sm text-purple-700 dark:text-purple-300 mb-2"},d={key:0,class:"flex items-center gap-2 text-green-600 dark:text-green-400"},u={key:1},c=["disabled"],p=["disabled"],g={key:1,class:"mt-2 text-sm text-green-600 dark:text-green-400"},v={key:2},m={class:"space-y-2"},x=["name","value","checked","onChange","disabled"],f={class:"text-sm text-text-primary-light dark:text-text-primary-dark"},b=["name","checked","disabled"],y={key:0,class:"ml-6"},h=["disabled"],k={key:1,class:"mt-2 text-sm text-green-600 dark:text-green-400"},w={key:3},_={class:"space-y-2"},C=["value","checked","onChange","disabled"],D={class:"text-sm text-text-primary-light dark:text-text-primary-dark"},S=["checked","disabled"],Z={key:0,class:"ml-6"},H=["disabled"],q={key:1,class:"mt-2 text-sm text-green-600 dark:text-green-400"};t.Z=(0,a.aZ)({__name:"QuestionInput",props:{question:{},answer:{},commentId:{}},emits:["answer"],setup(e,t){let{emit:r}=t,E=(0,l.iH)(e.answer||""),z=(0,l.iH)(e.answer||""),U=(0,l.iH)(e.answer?function(e){return e.split(", ").filter(e=>e.trim())}(e.answer):[]),T=(0,l.iH)(""),j=(0,l.iH)(!1),A=(0,a.Fl)(()=>"accepted"===e.question.type),V=(0,a.Fl)(()=>"choice"===e.question.type),L=(0,a.Fl)(()=>"multiChoice"===e.question.type),F=(0,a.Fl)(()=>"clarification"===e.question.type);function O(){let t="";if(V.value)j.value&&T.value.trim()?t=`Other: ${T.value.trim()}`:z.value&&(t=z.value);else if(L.value){let e=[...U.value];j.value&&T.value.trim()&&e.push(`Other: ${T.value.trim()}`),t=e.join(", ")}else F.value&&(t=E.value.trim());t&&r("answer",e.commentId,t)}function W(){z.value="",j.value=!0}function N(){j.value=!j.value}let P=(0,a.Fl)(()=>U.value.length>0||j.value&&T.value.trim());return(t,r)=>((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",s,[r[3]||(r[3]=(0,a._)("span",{class:"font-medium"},"Agent:",-1)),(0,a.Uk)(" "+(0,n.zw)(e.question.message),1)]),A.value?((0,a.wg)(),(0,a.iD)("div",d,[...r[4]||(r[4]=[(0,a._)("span",null,"\u2713",-1),(0,a._)("span",{class:"text-sm"},"Accepted",-1)])])):F.value?((0,a.wg)(),(0,a.iD)("div",u,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":r[0]||(r[0]=e=>E.value=e),class:"w-full border border-purple-300 dark:border-purple-700 rounded p-2 text-sm bg-white dark:bg-gray-800 text-text-primary-light dark:text-text-primary-dark focus:ring-2 focus:ring-purple-500 outline-none",rows:"2",placeholder:"Type your clarification...",disabled:!!e.answer},null,8,c),[[i.nr,E.value]]),e.answer?((0,a.wg)(),(0,a.iD)("div",g," \u2713 Answered: "+(0,n.zw)(e.answer),1)):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:O,disabled:!E.value.trim(),class:"mt-2 px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Submit Answer ",8,p))])):V.value&&e.question.options?((0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.question.options,t=>((0,a.wg)(),(0,a.iD)("label",{key:t,class:(0,n.C_)(["flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-colors",{"bg-purple-100 dark:bg-purple-900/40":z.value===t}])},[(0,a._)("input",{type:"radio",name:`question-${e.commentId}`,value:t,checked:z.value===t,onChange:e=>{var r;return r=t,void(z.value=r,j.value=!1)},disabled:!!e.answer,class:"text-purple-600"},null,40,x),(0,a._)("span",f,(0,n.zw)(t),1)],2))),128)),(0,a._)("label",{class:(0,n.C_)(["flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-colors",{"bg-purple-100 dark:bg-purple-900/40":j.value}])},[(0,a._)("input",{type:"radio",name:`question-${e.commentId}`,checked:j.value,onChange:W,disabled:!!e.answer,class:"text-purple-600"},null,40,b),r[5]||(r[5]=(0,a._)("span",{class:"text-sm text-text-primary-light dark:text-text-primary-dark"},"Other",-1))],2),j.value&&!e.answer?((0,a.wg)(),(0,a.iD)("div",y,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>T.value=e),type:"text",class:"w-full border border-purple-300 dark:border-purple-700 rounded p-2 text-sm bg-white dark:bg-gray-800 text-text-primary-light dark:text-text-primary-dark focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"Specify your choice..."},null,512),[[i.nr,T.value]])])):(0,a.kq)("",!0)]),e.answer?((0,a.wg)(),(0,a.iD)("div",k," \u2713 Selected: "+(0,n.zw)(e.answer),1)):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:O,disabled:!z.value&&(!j.value||!T.value.trim()),class:"mt-3 px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Submit Choice ",8,h))])):L.value&&e.question.options?((0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("div",_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.question.options,t=>((0,a.wg)(),(0,a.iD)("label",{key:t,class:(0,n.C_)(["flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-colors",{"bg-purple-100 dark:bg-purple-900/40":U.value.includes(t)}])},[(0,a._)("input",{type:"checkbox",value:t,checked:U.value.includes(t),onChange:e=>(function(e){let t=U.value.indexOf(e);t>=0?U.value.splice(t,1):U.value.push(e)})(t),disabled:!!e.answer,class:"text-purple-600 rounded"},null,40,C),(0,a._)("span",D,(0,n.zw)(t),1)],2))),128)),(0,a._)("label",{class:(0,n.C_)(["flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-colors",{"bg-purple-100 dark:bg-purple-900/40":j.value}])},[(0,a._)("input",{type:"checkbox",checked:j.value,onChange:N,disabled:!!e.answer,class:"text-purple-600 rounded"},null,40,S),r[6]||(r[6]=(0,a._)("span",{class:"text-sm text-text-primary-light dark:text-text-primary-dark"},"Other",-1))],2),j.value&&!e.answer?((0,a.wg)(),(0,a.iD)("div",Z,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>T.value=e),type:"text",class:"w-full border border-purple-300 dark:border-purple-700 rounded p-2 text-sm bg-white dark:bg-gray-800 text-text-primary-light dark:text-text-primary-dark focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"Specify your choice..."},null,512),[[i.nr,T.value]])])):(0,a.kq)("",!0)]),e.answer?((0,a.wg)(),(0,a.iD)("div",q," \u2713 Selected: "+(0,n.zw)(e.answer),1)):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:O,disabled:!P.value,class:"mt-3 px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Submit Choices ",8,H))])):(0,a.kq)("",!0)]))}})},70748:function(e,t,r){"use strict";r("18936"),r("54335"),r("67475"),r("67049"),r("67804");var a=r("26463"),n=r("78276"),i=r("35818"),l=r("86367"),o=r("34127"),s=r("70146"),d=r("7186"),u=r("8654"),c=r("25822"),p=r("88487"),g=r("99944"),v=r("11303"),m=r("39209");let x={class:"review-sidebar flex flex-col h-full bg-app-bg-light dark:bg-app-bg-dark border-l border-border-light dark:border-border-dark transition-colors duration-200"},f={class:"p-4 border-b border-border-light dark:border-border-dark bg-app-surface-light dark:bg-app-surface-dark transition-colors duration-200"},b={class:"font-semibold text-text-primary-light dark:text-text-primary-dark"},y={key:0,class:"text-sm font-normal text-text-secondary-light dark:text-text-secondary-dark"},h={key:0,class:"mt-2 text-sm text-purple-600 dark:text-purple-400"},k={class:"flex-1 overflow-y-auto p-4 space-y-4"},w={key:0,class:"text-center text-text-secondary-light dark:text-text-secondary-dark py-8"},_=["data-comment-id","onClick"],C={class:"text-xs text-text-secondary-light dark:text-text-secondary-dark border-l-2 border-claude-primary dark:border-claude-primary-dark pl-2 mb-2 italic truncate"},D={key:0},S=["onClick"],Z={key:0,class:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},H=["onClick"],q=["onClick"],E=["onUpdate:modelValue","onKeydown"],z={class:"flex justify-end gap-2"},U=["onClick"],T=["onClick"],j={key:1,class:"mt-4"},A={class:"text-sm text-text-secondary-light dark:text-text-secondary-dark cursor-pointer hover:text-text-primary-light dark:hover:text-text-primary-dark"},V={class:"mt-2 space-y-3"},L={class:"text-xs text-text-secondary-light dark:text-text-secondary-dark border-l-2 border-green-400 pl-2 mb-2 italic truncate"},F={class:"text-sm text-text-primary-light dark:text-text-primary-dark line-through"},O={class:"p-4 border-t border-border-light dark:border-border-dark bg-app-surface-light dark:bg-app-surface-dark transition-colors duration-200"},W={key:0,class:"mb-3"},N={key:1,class:"mb-3"},P=["value"],I=["disabled"],K={key:2,class:"mt-2 text-xs text-center text-orange-600 dark:text-orange-400"};t.Z=(0,a.aZ)({__name:"ReviewSidebar",props:{comments:{},confirmPending:{type:Boolean},reviewStatus:{},isReadOnly:{type:Boolean},hasQuestions:{type:Boolean},approvalNote:{},passThrough:{type:Boolean}},emits:["update-comment","delete-comment","submit-review","submit-with-note","comment-click","answer-question","update:approvalNote","update:passThrough"],setup(e,t){let{emit:r}=t;function $(e){(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),r("submit-with-note"))}let R=(0,a.Fl)(()=>e.comments.filter(e=>!e.resolved)),Y=(0,a.Fl)(()=>e.comments.filter(e=>e.resolved)),M=(0,a.Fl)(()=>!e.hasQuestions||R.value.every(e=>!e.question||"accepted"===e.question.type||!!e.answer)),B=(0,a.Fl)(()=>{if(e.confirmPending)return"Click Again to Confirm";if("discussing"===e.reviewStatus)return M.value?"Submit Answers":"Answer All Questions";return R.value.length>0?e.passThrough?"Approve with Suggestions":"Submit Feedback":"Approve"}),Q=(0,a.Fl)(()=>"discussing"===e.reviewStatus&&!M.value&&!0);function J(e){e.isEditing=!1}function G(e){e.tempText&&e.tempText!==e.comment&&r("update-comment",e.id,e.tempText),e.isEditing=!1}function X(e,t){r("answer-question",e,t)}function ee(e){let t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}return(t,et)=>((0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("div",f,[(0,a._)("h2",b,[et[4]||(et[4]=(0,a.Uk)(" Review Comments ",-1)),R.value.length>0?((0,a.wg)(),(0,a.iD)("span",y," ("+(0,n.zw)(R.value.length)+" active) ",1)):(0,a.kq)("",!0)]),e.hasQuestions?((0,a.wg)(),(0,a.iD)("div",h," Agent has questions for you. Please answer below. ")):(0,a.kq)("",!0)]),(0,a._)("div",k,[0===e.comments.length?((0,a.wg)(),(0,a.iD)("div",w," Select text in the plan to add comments. ")):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.value,t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,"data-comment-id":t.id,class:(0,n.C_)(["bg-app-surface-light dark:bg-app-surface-dark p-3 rounded-lg shadow-sm border border-border-light dark:border-border-dark group hover:border-claude-primary dark:hover:border-claude-primary-dark transition-colors",{"cursor-pointer":!e.isReadOnly}]),onClick:e=>r("comment-click",t.id)},[(0,a._)("div",C,' "'+(0,n.zw)(t.quote)+'" ',1),t.isEditing?((0,a.wg)(),(0,a.iD)("div",{key:1,onClick:et[0]||(et[0]=(0,i.iM)(()=>{},["stop"]))},[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e=>t.tempText=e,class:"w-full text-sm border border-border-light dark:border-border-dark rounded p-2 mb-2 focus:ring-2 focus:ring-claude-primary dark:focus:ring-claude-primary-dark outline-none bg-app-surface-light dark:bg-app-surface-dark text-text-primary-light dark:text-text-primary-dark transition-colors duration-200 min-h-[60px] resize-none",placeholder:"Enter comment... (\u2318\u21B5 to save, Esc to cancel)",onKeydown:e=>{var r,a;return r=e,a=t,void((r.metaKey||r.ctrlKey)&&"Enter"===r.key?(r.preventDefault(),G(a)):"Escape"===r.key&&(r.preventDefault(),J(a)))},onInput:ee},null,40,E),[[i.nr,t.tempText]]),(0,a._)("div",z,[(0,a._)("button",{onClick:e=>J(t),class:"p-1 text-text-secondary-light dark:text-text-secondary-dark hover:text-text-primary-light dark:hover:text-text-primary-dark"},[(0,a.Wm)((0,l.SU)(c.Z),{size:16})],8,U),(0,a._)("button",{onClick:e=>G(t),class:"p-1 text-green-600 hover:text-green-700"},[(0,a.Wm)((0,l.SU)(p.Z),{size:16})],8,T)])])):((0,a.wg)(),(0,a.iD)("div",D,[(0,a._)("div",{class:(0,n.C_)(["text-sm text-text-primary-light dark:text-text-primary-dark mb-2 cursor-pointer",{"line-clamp-2":!t.isExpanded}]),onClick:(0,i.iM)(e=>{var r;(r=t).isExpanded=!r.isExpanded},["stop"])},[(0,a.Uk)((0,n.zw)(t.comment)+" ",1),((0,a.wg)(),(0,a.j4)((0,a.LL)(t.isExpanded?(0,l.SU)(o.Z):(0,l.SU)(s.Z)),{size:14,class:"inline-block ml-1 text-text-secondary-light dark:text-text-secondary-dark align-middle"}))],10,S),e.isReadOnly||t.question?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Z,[(0,a._)("button",{onClick:(0,i.iM)(r=>{var a;return a=t,void(!e.isReadOnly&&(a.isEditing=!0,a.tempText=a.comment))},["stop"]),class:"p-1 text-text-secondary-light dark:text-text-secondary-dark hover:text-claude-primary dark:hover:text-claude-primary-dark"},[(0,a.Wm)((0,l.SU)(d.Z),{size:14})],8,H),(0,a._)("button",{onClick:(0,i.iM)(e=>r("delete-comment",t.id),["stop"]),class:"p-1 text-text-secondary-light dark:text-text-secondary-dark hover:text-red-600"},[(0,a.Wm)((0,l.SU)(u.Z),{size:14})],8,q)])),t.question?((0,a.wg)(),(0,a.j4)(g.Z,{key:1,question:t.question,answer:t.answer,"comment-id":t.id,onAnswer:X},null,8,["question","answer","comment-id"])):(0,a.kq)("",!0)]))],10,_))),128)),Y.value.length>0?((0,a.wg)(),(0,a.iD)("details",j,[(0,a._)("summary",A,(0,n.zw)(Y.value.length)+" resolved comment"+(0,n.zw)(Y.value.length>1?"s":""),1),(0,a._)("div",V,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Y.value,e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-200 dark:border-green-800 opacity-75"},[et[5]||(et[5]=(0,a._)("div",{class:"flex items-center gap-2 mb-1"},[(0,a._)("span",{class:"text-green-600 dark:text-green-400"},"\u2713"),(0,a._)("span",{class:"text-xs text-green-700 dark:text-green-300"},"Resolved")],-1)),(0,a._)("div",L,' "'+(0,n.zw)(e.quote)+'" ',1),(0,a._)("div",F,(0,n.zw)(e.comment),1)]))),128))])])):(0,a.kq)("",!0)]),(0,a._)("div",O,[!(R.value.length>0)||e.hasQuestions||e.isReadOnly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(m.Z,{"model-value":e.passThrough??!1,"onUpdate:modelValue":et[1]||(et[1]=e=>r("update:passThrough",e))},null,8,["model-value"])])),e.hasQuestions?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("details",N,[et[6]||(et[6]=(0,a._)("summary",{class:"text-sm text-text-secondary-light dark:text-text-secondary-dark cursor-pointer hover:text-text-primary-light dark:hover:text-text-primary-dark select-none"}," Add a global note (optional) ",-1)),(0,a._)("textarea",{value:e.approvalNote,onInput:et[2]||(et[2]=e=>r("update:approvalNote",e.target.value)),onKeydown:$,class:"w-full mt-2 text-sm border border-border-light dark:border-border-dark rounded-lg p-2 focus:ring-2 focus:ring-claude-primary dark:focus:ring-claude-primary-dark outline-none bg-app-surface-light dark:bg-app-surface-dark text-text-primary-light dark:text-text-primary-dark transition-colors duration-200 resize-none",rows:"2",placeholder:"Global review note (Cmd+Enter to submit)..."},null,40,P)])),(0,a._)("button",{onClick:et[3]||(et[3]=e=>r("submit-review")),disabled:Q.value,class:(0,n.C_)(["w-full text-white py-2 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2",e.confirmPending?"bg-red-600 dark:bg-red-700 hover:bg-red-700 dark:hover:bg-red-800 animate-pulse":Q.value?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-claude-primary dark:bg-claude-primary-dark hover:bg-claude-primary-hover"])},[(0,a._)("span",null,(0,n.zw)(B.value),1),e.confirmPending||Q.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(v.Z,{key:0,keys:"mod+shift+p",class:"!bg-white/20 !border-white/30 !text-white/80 !shadow-none"}))],10,I),e.hasQuestions&&!M.value?((0,a.wg)(),(0,a.iD)("p",K," Please answer all questions before submitting. ")):(0,a.kq)("",!0)])]))}})},70699:function(e,t,r){"use strict";r("18936"),r("54335"),r("67475");var a=r("26463"),n=r("35818"),i=r("86367"),l=r("78276"),o=r("69542"),s=r("70146"),d=r("39294");let u={key:0,class:"absolute left-0 bottom-full mb-1 w-56 bg-app-surface-light dark:bg-app-surface-dark rounded-lg shadow-lg border border-border-light dark:border-border-dark z-50 overflow-hidden"},c={class:"py-1 max-h-48 overflow-y-auto"},p={key:0},g=["onClick"],v={class:"font-medium"},m={class:"text-xs text-text-secondary-light dark:text-text-secondary-dark truncate"},x={key:1},f=["onClick"],b={class:"font-medium"},y={class:"text-xs text-text-secondary-light dark:text-text-secondary-dark truncate"},h={key:2,class:"px-3 py-4 text-sm text-center text-text-secondary-light dark:text-text-secondary-dark"};t.Z=(0,a.aZ)({__name:"TemplateDropdown",emits:["select"],setup(e,t){let{emit:r}=t,{loadConfig:k,getTemplates:w}=(0,d.Z)(),_=(0,i.iH)(!1),C=(0,i.iH)([]),D=(0,i.iH)(null);function S(e){D.value&&!D.value.contains(e.target)&&(_.value=!1)}function Z(e){r("select",e),_.value=!1}return(0,a.bv)(async()=>{try{await k(),C.value=w()}catch{}}),(0,a.bv)(()=>{document.addEventListener("click",S)}),(0,a.Ah)(()=>{document.removeEventListener("click",S)}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"dropdownRef",ref:D,class:"relative inline-block"},[(0,a._)("button",{type:"button",onClick:t[0]||(t[0]=(0,n.iM)(e=>_.value=!_.value,["stop"])),class:"flex items-center gap-1 text-xs text-text-secondary-light dark:text-text-secondary-dark hover:text-claude-primary dark:hover:text-claude-primary-dark transition-colors"},[(0,a.Wm)((0,i.SU)(o.Z),{size:12}),t[1]||(t[1]=(0,a._)("span",null,"\u6A21\u677F",-1)),(0,a.Wm)((0,i.SU)(s.Z),{size:12,class:(0,l.C_)([{"rotate-180":_.value},"transition-transform"])},null,8,["class"])]),(0,a.Wm)(n.uT,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:(0,a.w5)(()=>[_.value?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",c,[C.value.filter(e=>e.isBuiltIn).length>0?((0,a.wg)(),(0,a.iD)("div",p,[t[2]||(t[2]=(0,a._)("div",{class:"px-3 py-1.5 text-xs text-text-secondary-light dark:text-text-secondary-dark font-medium"}," \u5185\u7F6E\u6A21\u677F ",-1)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.value.filter(e=>e.isBuiltIn),e=>((0,a.wg)(),(0,a.iD)("button",{key:e.id,onClick:t=>Z(e),class:"w-full text-left px-3 py-2 text-sm text-text-primary-light dark:text-text-primary-dark hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[(0,a._)("div",v,(0,l.zw)(e.name),1),(0,a._)("div",m,(0,l.zw)(e.content),1)],8,g))),128))])):(0,a.kq)("",!0),C.value.filter(e=>!e.isBuiltIn).length>0?((0,a.wg)(),(0,a.iD)("div",x,[t[3]||(t[3]=(0,a._)("div",{class:"px-3 py-1.5 text-xs text-text-secondary-light dark:text-text-secondary-dark font-medium border-t border-border-light dark:border-border-dark mt-1 pt-2"}," \u81EA\u5B9A\u4E49\u6A21\u677F ",-1)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.value.filter(e=>!e.isBuiltIn),e=>((0,a.wg)(),(0,a.iD)("button",{key:e.id,onClick:t=>Z(e),class:"w-full text-left px-3 py-2 text-sm text-text-primary-light dark:text-text-primary-dark hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[(0,a._)("div",b,(0,l.zw)(e.name),1),(0,a._)("div",y,(0,l.zw)(e.content),1)],8,f))),128))])):(0,a.kq)("",!0),0===C.value.length?((0,a.wg)(),(0,a.iD)("div",h," \u6682\u65E0\u6A21\u677F ")):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)]),_:1})],512))}})},58029:function(e,t,r){"use strict";var a=r("26463"),n=r("86367"),i=r("78276"),l=r("35818"),o=r("70336"),s=r("34127"),d=r("70146"),u=r("7478"),c=r("78015"),p=r("39237"),g=r("23303"),v=r("45258");let m={class:"version-panel bg-app-surface-light dark:bg-app-surface-dark border border-border-light dark:border-border-dark rounded-lg shadow-sm transition-colors duration-200"},x={class:"flex items-center gap-2"},f={class:"text-xs px-2 py-0.5 rounded-full bg-claude-primary-light dark:bg-claude-primary-dark/20 text-claude-primary dark:text-claude-primary-dark"},b={class:"flex items-center gap-2"},y={key:0,class:"text-xs text-text-secondary-light dark:text-text-secondary-dark"},h={key:0,class:"border-t border-border-light dark:border-border-dark"},k={class:"max-h-64 overflow-y-auto"},w=["onClick"],_={class:"flex items-start justify-between"},C={class:"flex-1 min-w-0"},D={class:"flex items-center gap-2 mb-1"},S={class:"text-xs font-mono text-claude-primary dark:text-claude-primary-dark"},Z={key:0,class:"text-xs px-1.5 py-0.5 rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"},H={key:1,class:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"},q={key:0,class:"text-sm text-text-primary-light dark:text-text-primary-dark truncate mb-1"},E={class:"flex items-center gap-3 text-xs text-text-secondary-light dark:text-text-secondary-dark"},z={class:"flex items-center gap-1"},U={key:0,class:"flex items-center gap-1"},T={key:0,class:"flex items-center gap-1 ml-2"},j=["onClick"],A=["onClick"];t.Z=(0,a.aZ)({__name:"VersionPanel",props:{versions:{},currentVersion:{},selectedVersion:{}},emits:["select-version","compare-versions","rollback"],setup(e,t){let{emit:r}=t,V=(0,n.iH)(!1),L=(0,a.Fl)(()=>[...e.versions].sort((e,t)=>t.createdAt-e.createdAt)),F=(0,a.Fl)(()=>L.value[0]);function O(e){return e.substring(0,8)}return(t,W)=>((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("div",{class:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-t-lg transition-colors",onClick:W[0]||(W[0]=e=>V.value=!V.value)},[(0,a._)("div",x,[(0,a.Wm)((0,n.SU)(o.Z),{size:18,class:"text-claude-primary dark:text-claude-primary-dark"}),W[1]||(W[1]=(0,a._)("span",{class:"font-medium text-text-primary-light dark:text-text-primary-dark"}," Version History ",-1)),(0,a._)("span",f,(0,i.zw)(e.versions.length),1)]),(0,a._)("div",b,[F.value?((0,a.wg)(),(0,a.iD)("span",y,(0,i.zw)(O(F.value.versionHash)),1)):(0,a.kq)("",!0),((0,a.wg)(),(0,a.j4)((0,a.LL)(V.value?(0,n.SU)(s.Z):(0,n.SU)(d.Z)),{size:18,class:"text-text-secondary-light dark:text-text-secondary-dark"}))])]),V.value?((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("div",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.value,(t,o)=>((0,a.wg)(),(0,a.iD)("div",{key:t.versionHash,class:(0,i.C_)(["px-4 py-3 border-b border-border-light dark:border-border-dark last:border-b-0 cursor-pointer transition-colors",t.versionHash===e.selectedVersion?"bg-claude-primary-light dark:bg-claude-primary-dark/20":"hover:bg-gray-50 dark:hover:bg-gray-800/50"]),onClick:e=>{r("select-version",t.versionHash)}},[(0,a._)("div",_,[(0,a._)("div",C,[(0,a._)("div",D,[(0,a._)("code",S,(0,i.zw)(O(t.versionHash)),1),t.isCurrent?((0,a.wg)(),(0,a.iD)("span",Z," Current ")):(0,a.kq)("",!0),0!==o||t.isCurrent?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",H," Latest "))]),t.changeDescription?((0,a.wg)(),(0,a.iD)("div",q,(0,i.zw)(t.changeDescription),1)):(0,a.kq)("",!0),(0,a._)("div",E,[(0,a._)("span",z,[(0,a.Wm)((0,n.SU)(u.Z),{size:12}),(0,a.Uk)(" "+(0,i.zw)(function(e){let t=new Date(e),r=new Date().getTime()-e;return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:t.toLocaleDateString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}(t.createdAt)),1)]),t.author?((0,a.wg)(),(0,a.iD)("span",U,["agent"===t.author?((0,a.wg)(),(0,a.j4)((0,n.SU)(c.Z),{key:0,size:12})):((0,a.wg)(),(0,a.j4)((0,n.SU)(p.Z),{key:1,size:12})),(0,a.Uk)(" "+(0,i.zw)("agent"===t.author?"Agent":"Human"),1)])):(0,a.kq)("",!0)])]),t.isCurrent?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("button",{onClick:(0,l.iM)(a=>{r("compare-versions",t.versionHash,e.currentVersion)},["stop"]),class:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-text-secondary-light dark:text-text-secondary-dark hover:text-claude-primary dark:hover:text-claude-primary-dark transition-colors",title:"Compare with current version"},[(0,a.Wm)((0,n.SU)(g.Z),{size:14})],8,j),t.hasSameContent?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:(0,l.iM)(e=>{var a;return a=t,void(confirm(`Rollback to version ${O(a.versionHash)}?`)&&r("rollback",a.versionHash))},["stop"]),class:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-text-secondary-light dark:text-text-secondary-dark hover:text-claude-primary dark:hover:text-claude-primary-dark transition-colors",title:"Rollback to this version"},[(0,a.Wm)((0,n.SU)(v.Z),{size:14})],8,A))]))])],10,w))),128))])])):(0,a.kq)("",!0)]))}})},39581:function(e,t,r){"use strict";r("18936"),r("54335"),r("67475");var a=r("26463"),n=r("86367"),i=r("78276"),l=r("35818"),o=r("19369"),s=r("38958"),d=r("55588"),u=r("69542"),c=r("2341"),p=r("8654"),g=r("39294");let v={class:"min-h-screen bg-app-bg-light dark:bg-app-bg-dark transition-colors duration-200"},m={class:"bg-app-surface-light dark:bg-app-surface-dark border-b border-border-light dark:border-border-dark p-4"},x={class:"max-w-2xl mx-auto flex items-center gap-4"},f={class:"flex items-center gap-2"},b={class:"max-w-2xl mx-auto p-6 space-y-8"},y={class:"bg-app-surface-light dark:bg-app-surface-dark rounded-lg border border-border-light dark:border-border-dark p-6"},h={class:"flex items-center gap-2 mb-4"},k={class:"flex items-center justify-between py-3 border-b border-border-light dark:border-border-dark"},w={class:"flex items-center gap-2"},_={class:"space-y-3 pt-3"},C={class:"flex items-center justify-between py-2"},D={class:"flex items-center justify-between py-1"},S=["disabled"],Z={class:"flex items-center justify-between py-1"},H=["disabled"],q={class:"flex items-center justify-between py-1"},E=["disabled"],z={class:"bg-app-surface-light dark:bg-app-surface-dark rounded-lg border border-border-light dark:border-border-dark p-6"},U={class:"flex items-center justify-between mb-4"},T={class:"flex items-center gap-2"},j={key:0,class:"mb-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},A={class:"space-y-3"},V={class:"flex justify-end gap-2"},L=["disabled"],F={key:1,class:"mb-4"},O={class:"space-y-2"},W={class:"font-medium text-text-primary-light dark:text-text-primary-dark"},N={class:"text-sm text-text-secondary-light dark:text-text-secondary-dark mt-1"},P={key:0,class:"text-center py-4 text-text-secondary-light dark:text-text-secondary-dark"},I={key:1,class:"space-y-2"},K={class:"flex-1"},$={class:"font-medium text-text-primary-light dark:text-text-primary-dark"},R={class:"text-sm text-text-secondary-light dark:text-text-secondary-dark mt-1"},Y=["onClick"];t.Z=(0,a.aZ)({__name:"SettingsPage",setup(e){let{config:t,loading:r,loadConfig:M,getTemplates:B,addTemplate:Q,deleteTemplate:J,getNotificationSettings:G,updateNotificationSettings:X}=(0,g.Z)(),ee=(0,a.Fl)(()=>{var e;return(null===(e=t.value)||void 0===e?void 0:e.templates)||[]}),et=(0,a.Fl)(()=>ee.value.filter(e=>e.isBuiltIn)),er=(0,a.Fl)(()=>ee.value.filter(e=>!e.isBuiltIn)),ea=(0,n.iH)(!1),en=(0,n.iH)(""),ei=(0,n.iH)(""),el=(0,a.Fl)(()=>{var e;return(null===(e=t.value)||void 0===e?void 0:e.notification)||{enabled:!0,versionUpdated:!0,questionsUpdated:!0,timeoutWarning:!0}}),eo=(0,n.iH)("default");async function es(){if(!("Notification"in window))return;let e=await Notification.requestPermission();eo.value=e}async function ed(e){let t=el.value[e];await X({[e]:!t})}async function eu(){if(en.value.trim()&&ei.value.trim())try{await Q({name:en.value.trim(),content:ei.value.trim()}),en.value="",ei.value="",ea.value=!1}catch(e){alert("\u6DFB\u52A0\u6A21\u677F\u5931\u8D25")}}async function ec(e){if(confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u6A21\u677F\u5417\uFF1F"))try{await J(e)}catch(e){alert("\u5220\u9664\u6A21\u677F\u5931\u8D25")}}function ep(){window.history.back()}return(0,a.bv)(async()=>{await M(),"Notification"in window&&(eo.value=Notification.permission)}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("header",m,[(0,a._)("div",x,[(0,a._)("button",{onClick:ep,class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[(0,a.Wm)((0,n.SU)(o.Z),{size:20,class:"text-text-primary-light dark:text-text-primary-dark"})]),(0,a._)("div",f,[(0,a.Wm)((0,n.SU)(s.Z),{size:24,class:"text-claude-primary"}),t[8]||(t[8]=(0,a._)("h1",{class:"text-xl font-bold text-text-primary-light dark:text-text-primary-dark"},"Settings",-1))])])]),(0,a._)("main",b,[(0,a._)("section",y,[(0,a._)("div",h,[(0,a.Wm)((0,n.SU)(d.Z),{size:20,class:"text-claude-primary"}),t[9]||(t[9]=(0,a._)("h2",{class:"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark"},"\u901A\u77E5\u8BBE\u7F6E",-1))]),(0,a._)("div",k,[t[10]||(t[10]=(0,a._)("span",{class:"text-text-primary-light dark:text-text-primary-dark"},"\u6D4F\u89C8\u5668\u901A\u77E5\u6743\u9650",-1)),(0,a._)("div",w,[(0,a._)("span",{class:(0,i.C_)(["px-2 py-1 text-xs rounded","granted"===eo.value?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"denied"===eo.value?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-400"])},(0,i.zw)("granted"===eo.value?"\u5DF2\u6388\u6743":"denied"===eo.value?"\u5DF2\u62D2\u7EDD":"\u672A\u8BBE\u7F6E"),3),"granted"!==eo.value?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:es,class:"px-3 py-1 text-sm bg-claude-primary text-white rounded hover:bg-claude-primary-hover transition-colors"}," \u7533\u8BF7\u6743\u9650 ")):(0,a.kq)("",!0)])]),(0,a._)("div",_,[(0,a._)("div",C,[t[11]||(t[11]=(0,a._)("span",{class:"text-text-primary-light dark:text-text-primary-dark"},"\u542F\u7528\u901A\u77E5",-1)),(0,a._)("button",{onClick:t[0]||(t[0]=e=>ed("enabled")),class:(0,i.C_)(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",el.value.enabled?"bg-claude-primary":"bg-gray-300 dark:bg-gray-600"])},[(0,a._)("span",{class:(0,i.C_)(["inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform",el.value.enabled?"translate-x-5":"translate-x-0.5"])},null,2)],2)]),(0,a._)("div",{class:(0,i.C_)(["pl-4 space-y-3",{"opacity-50":!el.value.enabled}])},[(0,a._)("div",D,[t[12]||(t[12]=(0,a._)("span",{class:"text-sm text-text-secondary-light dark:text-text-secondary-dark"},"\u65B0\u7248\u672C\u63D0\u4EA4\u901A\u77E5",-1)),(0,a._)("button",{onClick:t[1]||(t[1]=e=>ed("versionUpdated")),disabled:!el.value.enabled,class:(0,i.C_)(["relative inline-flex h-5 w-9 items-center rounded-full transition-colors",el.value.versionUpdated?"bg-claude-primary":"bg-gray-300 dark:bg-gray-600",!el.value.enabled&&"cursor-not-allowed"])},[(0,a._)("span",{class:(0,i.C_)(["inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform",el.value.versionUpdated?"translate-x-4":"translate-x-0.5"])},null,2)],10,S)]),(0,a._)("div",Z,[t[13]||(t[13]=(0,a._)("span",{class:"text-sm text-text-secondary-light dark:text-text-secondary-dark"},"Agent \u95EE\u9898\u901A\u77E5",-1)),(0,a._)("button",{onClick:t[2]||(t[2]=e=>ed("questionsUpdated")),disabled:!el.value.enabled,class:(0,i.C_)(["relative inline-flex h-5 w-9 items-center rounded-full transition-colors",el.value.questionsUpdated?"bg-claude-primary":"bg-gray-300 dark:bg-gray-600",!el.value.enabled&&"cursor-not-allowed"])},[(0,a._)("span",{class:(0,i.C_)(["inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform",el.value.questionsUpdated?"translate-x-4":"translate-x-0.5"])},null,2)],10,H)]),(0,a._)("div",q,[t[14]||(t[14]=(0,a._)("span",{class:"text-sm text-text-secondary-light dark:text-text-secondary-dark"},"\u8D85\u65F6\u9884\u8B66\u901A\u77E5",-1)),(0,a._)("button",{onClick:t[3]||(t[3]=e=>ed("timeoutWarning")),disabled:!el.value.enabled,class:(0,i.C_)(["relative inline-flex h-5 w-9 items-center rounded-full transition-colors",el.value.timeoutWarning?"bg-claude-primary":"bg-gray-300 dark:bg-gray-600",!el.value.enabled&&"cursor-not-allowed"])},[(0,a._)("span",{class:(0,i.C_)(["inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform",el.value.timeoutWarning?"translate-x-4":"translate-x-0.5"])},null,2)],10,E)])],2)])]),(0,a._)("section",z,[(0,a._)("div",U,[(0,a._)("div",T,[(0,a.Wm)((0,n.SU)(u.Z),{size:20,class:"text-claude-primary"}),t[15]||(t[15]=(0,a._)("h2",{class:"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark"},"\u8BC4\u8BBA\u6A21\u677F",-1))]),(0,a._)("button",{onClick:t[4]||(t[4]=e=>ea.value=!0),class:"flex items-center gap-1 px-3 py-1.5 text-sm bg-claude-primary text-white rounded hover:bg-claude-primary-hover transition-colors"},[(0,a.Wm)((0,n.SU)(c.Z),{size:16}),t[16]||(t[16]=(0,a._)("span",null,"\u6DFB\u52A0\u6A21\u677F",-1))])]),ea.value?((0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("div",A,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>en.value=e),type:"text",placeholder:"\u6A21\u677F\u540D\u79F0",class:"w-full px-3 py-2 border border-border-light dark:border-border-dark rounded-lg bg-app-surface-light dark:bg-app-surface-dark text-text-primary-light dark:text-text-primary-dark focus:ring-2 focus:ring-claude-primary outline-none"},null,512),[[l.nr,en.value]]),(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>ei.value=e),placeholder:"\u6A21\u677F\u5185\u5BB9",rows:"3",class:"w-full px-3 py-2 border border-border-light dark:border-border-dark rounded-lg bg-app-surface-light dark:bg-app-surface-dark text-text-primary-light dark:text-text-primary-dark focus:ring-2 focus:ring-claude-primary outline-none resize-none"},null,512),[[l.nr,ei.value]]),(0,a._)("div",V,[(0,a._)("button",{onClick:t[7]||(t[7]=e=>{ea.value=!1,en.value="",ei.value=""}),class:"px-4 py-2 text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors"}," \u53D6\u6D88 "),(0,a._)("button",{onClick:eu,disabled:!en.value.trim()||!ei.value.trim(),class:"px-4 py-2 bg-claude-primary text-white rounded hover:bg-claude-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," \u4FDD\u5B58 ",8,L)])])])):(0,a.kq)("",!0),et.value.length>0?((0,a.wg)(),(0,a.iD)("div",F,[t[17]||(t[17]=(0,a._)("h3",{class:"text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-2"},"\u5185\u7F6E\u6A21\u677F",-1)),(0,a._)("div",O,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(et.value,e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[(0,a._)("div",W,(0,i.zw)(e.name),1),(0,a._)("div",N,(0,i.zw)(e.content),1)]))),128))])])):(0,a.kq)("",!0),(0,a._)("div",null,[t[18]||(t[18]=(0,a._)("h3",{class:"text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-2"},"\u81EA\u5B9A\u4E49\u6A21\u677F",-1)),0===er.value.length?((0,a.wg)(),(0,a.iD)("div",P," \u6682\u65E0\u81EA\u5B9A\u4E49\u6A21\u677F ")):((0,a.wg)(),(0,a.iD)("div",I,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(er.value,e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg flex items-start justify-between gap-4"},[(0,a._)("div",K,[(0,a._)("div",$,(0,i.zw)(e.name),1),(0,a._)("div",R,(0,i.zw)(e.content),1)]),(0,a._)("button",{onClick:t=>ec(e.id),class:"p-1 text-red-500 hover:text-red-600 transition-colors"},[(0,a.Wm)((0,n.SU)(p.Z),{size:16})],8,Y)]))),128))]))])])])]))}})},39294:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}}),r("19608");var a=r("86367"),n=r("26463");let i=(0,a.iH)(null),l=(0,a.iH)(!1),o=(0,a.iH)(null);function s(){async function e(){if(i.value)return i.value;l.value=!0,o.value=null;try{let e=await fetch("/api/config");if(!e.ok)throw Error("Failed to load config");return i.value=await e.json(),i.value}catch(e){throw o.value=e.message,e}finally{l.value=!1}}async function t(t){let r=await fetch("/api/config/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to add template");let a=await r.json();return await e(),a.template}async function r(t){if(!(await fetch("/api/config/templates",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({templates:t})})).ok)throw Error("Failed to update templates");i.value=null,await e()}async function a(t){return!!(await fetch(`/api/config/templates/${t}`,{method:"DELETE"})).ok&&(i.value=null,await e(),!0)}async function s(e){let t=await fetch("/api/config/notification",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to update notification settings");let r=await t.json();return i.value&&(i.value.notification=r.notification),r.notification}return(0,n.bv)(()=>{!i.value&&e().catch(()=>{})}),{config:i,loading:l,error:o,loadConfig:e,getTemplates:function(){var e;return(null===(e=i.value)||void 0===e?void 0:e.templates)||[]},addTemplate:t,updateTemplates:r,deleteTemplate:a,getNotificationSettings:function(){var e;return(null===(e=i.value)||void 0===e?void 0:e.notification)||{enabled:!0,versionUpdated:!0,questionsUpdated:!0,timeoutWarning:!0}},updateNotificationSettings:s}}},68277:function(e,t,r){"use strict";r.d(t,{V5:function(){return o},v5:function(){return c}}),r("93088"),r("87866"),r("12131"),r("6016"),r("28763"),r("96408"),r("56201"),r("45521"),r("81354"),r("73206"),r("82762"),r("78754"),r("5320"),r("69708"),r("34210"),r("62979");var a=r("86367"),n=r("26463");let i=(0,a.iH)(new Map),l=!1,o=(0,n.Fl)(()=>/Mac|iPod|iPhone|iPad/.test(navigator.platform)),s={mod:(0,n.Fl)(()=>o.value?"\u2318":"Ctrl"),shift:(0,n.Fl)(()=>o.value?"\u21E7":"Shift"),alt:(0,n.Fl)(()=>o.value?"\u2325":"Alt"),ctrl:(0,n.Fl)(()=>o.value?"\u2303":"Ctrl"),enter:(0,n.Fl)(()=>o.value?"\u21B5":"Enter"),space:(0,n.Fl)(()=>o.value?"\u2423":"Space"),esc:"Esc",left:"\u2190",right:"\u2192",up:"\u2191",down:"\u2193"};function d(){let e=document.activeElement;if(!e)return!1;let t=e.tagName.toLowerCase();return"input"===t||"textarea"===t||e.isContentEditable}function u(e){let t=e.key.toLowerCase();for(let r of i.value.values()){let a=r.key.toLowerCase();if(t!==a&&e.code.toLowerCase()!==a)continue;let n=r.modifiers||{},i=n.mod?o.value?e.metaKey:e.ctrlKey:!(o.value?e.metaKey:e.ctrlKey)||n.ctrl;n.ctrl?e.ctrlKey:e.ctrlKey&&n.mod;let l=n.shift?e.shiftKey:!e.shiftKey,s=n.alt?e.altKey:!e.altKey;if(!!i&&!!l&&!!s&&(!n.ctrl||!!e.ctrlKey)){if(!(!r.enableInInput&&d())){e.preventDefault(),r.handler();return}}}}function c(){function e(e){i.value.delete(e),0===i.value.size&&(!l||(window.removeEventListener("keydown",u),l=!1))}return(0,n.Ah)(()=>{}),{isMac:o,symbols:s,register:function(t){let r=function(e,t){let r=[];return(null==t?void 0:t.mod)&&r.push("mod"),(null==t?void 0:t.ctrl)&&r.push("ctrl"),(null==t?void 0:t.shift)&&r.push("shift"),(null==t?void 0:t.alt)&&r.push("alt"),r.push(e.toLowerCase()),r.join("+")}(t.key,t.modifiers),a={...t,id:r};return i.value.set(r,a),l||(window.addEventListener("keydown",u),l=!0),()=>e(r)},unregister:e,getBindingsByGroup:function(){let e={};for(let t of i.value.values())!e[t.group]&&(e[t.group]=[]),e[t.group].push(t);return e},formatKeys:function(e){let t=[],r=e.modifiers||{};return r.mod&&t.push(o.value?"\u2318":"Ctrl"),r.ctrl&&!r.mod&&t.push(o.value?"\u2303":"Ctrl"),r.shift&&t.push(o.value?"\u21E7":"Shift"),r.alt&&t.push(o.value?"\u2325":"Alt"),t.push({enter:o.value?"\u21B5":"Enter",escape:"Esc",arrowleft:"\u2190",arrowright:"\u2192",arrowup:"\u2191",arrowdown:"\u2193",space:o.value?"\u2423":"Space","/":"/","?":"?"}[e.key.toLowerCase()]||e.key.toUpperCase()),t.join(o.value?"":"+")},bindings:i,isInputFocused:d}}},63819:function(e,t,r){"use strict";r.d(t,{l:function(){return s}});var a=r("86367"),n=r("26463"),i=r("39294");let l="Notification"in window,o=(0,a.iH)("default");function s(){let{getNotificationSettings:e}=(0,i.Z)();async function t(){if(!l)return!1;let e=await Notification.requestPermission();return o.value=e,"granted"===e}function r(t,r){if(!l||"granted"!==o.value||!e().enabled)return null;let a=new Notification(t,{icon:"/favicon.ico",badge:"/favicon.ico",...r});return a.onclick=()=>{window.focus(),a.close()},a}return(0,n.bv)(()=>{l&&(o.value=Notification.permission)}),{isSupported:l,permission:o,requestPermission:t,notify:r,notifyVersionUpdated:function(t){e().versionUpdated&&r("Plan Review: \u65B0\u7248\u672C\u5DF2\u63D0\u4EA4",{body:`Agent \u{63D0}\u{4EA4}\u{4E86}\u{4FEE}\u{8BA2}\u{7248}\u{672C} (${t.substring(0,8)}...)`,tag:"version-updated"})},notifyQuestionsUpdated:function(t){e().questionsUpdated&&r("Plan Review: Agent \u6709\u95EE\u9898",{body:`Agent \u{5BF9} ${t} \u{6761}\u{8BC4}\u{8BBA}\u{63D0}\u{51FA}\u{4E86}\u{95EE}\u{9898}\u{FF0C}\u{8BF7}\u{56DE}\u{590D}`,tag:"questions-updated"})},notifyTimeoutWarning:function(t){e().timeoutWarning&&r("Plan Review: \u5373\u5C06\u8D85\u65F6",{body:`\u{5BA1}\u{6838}\u{5C06}\u{5728} ${t} \u{5206}\u{949F}\u{540E}\u{8D85}\u{65F6}\u{FF0C}\u{8BF7}\u{5C3D}\u{5FEB}\u{5B8C}\u{6210}`,tag:"timeout-warning",requireInteraction:!0})}}}},998:function(e,t,r){"use strict";r.d(t,{D:function(){return i}}),r("42464");var a=r("86367"),n=r("26463");function i(e,t){let r=(0,a.iH)(!1),i=(0,a.iH)(null),l=null,o=null;function s(){if(!!e.value)(l=new EventSource(`/api/reviews/${e.value}/events`)).onopen=()=>{r.value=!0,console.log("[SSE] Connected")},l.addEventListener("connected",e=>{try{var r;let a=JSON.parse(e.data);i.value=e.lastEventId,null===(r=t.onConnected)||void 0===r||r.call(t,a),console.log("[SSE] Received connected event")}catch(e){console.error("[SSE] Failed to parse connected event:",e)}}),l.addEventListener("status_changed",e=>{try{var r;let a=JSON.parse(e.data);i.value=e.lastEventId,null===(r=t.onStatusChanged)||void 0===r||r.call(t,a),console.log("[SSE] Status changed:",a.previousStatus,"->",a.status)}catch(e){console.error("[SSE] Failed to parse status_changed event:",e)}}),l.addEventListener("version_updated",e=>{try{var r;let a=JSON.parse(e.data);i.value=e.lastEventId,null===(r=t.onVersionUpdated)||void 0===r||r.call(t,a),console.log("[SSE] Version updated:",a.version.versionHash.substring(0,8))}catch(e){console.error("[SSE] Failed to parse version_updated event:",e)}}),l.addEventListener("questions_updated",e=>{try{var r;let a=JSON.parse(e.data);i.value=e.lastEventId,null===(r=t.onQuestionsUpdated)||void 0===r||r.call(t,a),console.log("[SSE] Questions updated:",a.questions.length,"questions")}catch(e){console.error("[SSE] Failed to parse questions_updated event:",e)}}),l.addEventListener("heartbeat",e=>{i.value=e.lastEventId}),l.onerror=e=>{var a;r.value=!1,console.warn("[SSE] Connection error, will reconnect..."),null===(a=t.onError)||void 0===a||a.call(t,e),null==l||l.close(),l=null,o&&clearTimeout(o),o=window.setTimeout(()=>{console.log("[SSE] Reconnecting..."),s()},3e3)}}function d(){o&&(clearTimeout(o),o=null),l&&(l.close(),l=null,r.value=!1,console.log("[SSE] Disconnected"))}return(0,n.bv)(()=>{e.value&&s()}),(0,n.Ah)(()=>{d()}),{isConnected:r,lastEventId:i,connect:s,disconnect:d}}},99505:function(e,t,r){"use strict";var a=r("35818");r("3539");var n=r("94542");(0,a.ri)(n.Z).mount("#app")},67579:function(e,t,r){"use strict";r.r(e.exports={})},83177:function(e,t,r){"use strict";r.r(e.exports={})},3539:function(e,t,r){"use strict";r.r(e.exports={})},84286:function(e,t,r){"use strict";r.r(e.exports={})},37988:function(e,t,r){"use strict";r.r(e.exports={})}},g={};function v(e){var t=g[e];if(void 0!==t)return t.exports;var r=g[e]={exports:{}};return p[e].call(r.exports,r,r.exports,v),r.exports}v.m=p,v.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return v.d(t,{a:t}),t},v.d=function(e,t){for(var r in t)v.o(t,r)&&!v.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},v.f={},v.e=function(e){return Promise.all(Object.keys(v.f).reduce(function(t,r){return v.f[r](e,t),t},[]))},v.k=function(e){return""+e+".css"},v.u=function(e){return"static/js/async/"+e+"."+({10:"8d9699bc",115:"06e0c83c",12:"637ded5e",204:"a6d8faf7",213:"2d8c0752",232:"d2c3f6c6",25:"9a78cc63",292:"90101afa",294:"22a29240",304:"5cf80e6e",329:"380d4841",349:"f06ab6df",390:"532950b2",455:"b37347f9",460:"30707ecb",464:"6c511222",506:"f3db5235",508:"25cff55a",58:"e9f6fb59",593:"0bb61ab3",598:"a7cc2306",6:"79ec695c",629:"98e37088",634:"20a0a02a",678:"283c15ca",692:"e8a881a9",721:"0604b15a",777:"41aa2902",808:"99e6b41c",828:"561fbaed",838:"5cdee16d",852:"f1abc1c3",872:"1b1e6505",877:"1270c783",915:"639a0d7c",926:"fb718808",929:"a0ef4363",933:"886131dd",966:"fc3947f8",969:"1a949995"})[e]+".js"},v.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),v.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="client:",v.l=function(r,a,n,i){if(e[r]){e[r].push(a);return}if(void 0!==n){for(var l,o,s=document.getElementsByTagName("script"),d=0;d<s.length;d++){var u=s[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){l=u;break}}}!l&&(o=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,v.nc&&l.setAttribute("nonce",v.nc),l.setAttribute("data-webpack",t+n),l.src=r),e[r]=[a];var c=function(t,a){l.onerror=l.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach(function(e){return e(a)}),t)return t(a)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=c.bind(null,l.onerror),l.onload=c.bind(null,l.onload),o&&document.head.appendChild(l)},v.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r=[],v.O=function(e,t,a,n){if(t){n=n||0;for(var i=r.length;i>0&&r[i-1][2]>n;i--)r[i]=r[i-1];r[i]=[t,a,n];return}for(var l=1/0,i=0;i<r.length;i++){for(var t=r[i][0],a=r[i][1],n=r[i][2],o=!0,s=0;s<t.length;s++)l>=n&&Object.keys(v.O).every(function(e){return v.O[e](t[s])})?t.splice(s--,1):(o=!1,n<l&&(l=n));if(o){r.splice(i--,1);var d=a();void 0!==d&&(e=d)}}return e},v.p="/",a={126:0,139:0,206:0,707:0},n="client",i="data-webpack-loading",l=function(e,t,r,a){var l,o,s="chunk-"+e;if(!a){for(var d=document.getElementsByTagName("link"),u=0;u<d.length;u++){var c=d[u],p=c.getAttribute("href")||c.href;if(p&&!p.startsWith(v.p)&&(p=v.p+(p.startsWith("/")?p.slice(1):p)),"stylesheet"==c.rel&&(p&&p.startsWith(t)||c.getAttribute("data-webpack")==n+":"+s)){l=c;break}}if(!r)return l}!l&&(o=!0,(l=document.createElement("link")).setAttribute("data-webpack",n+":"+s),l.setAttribute(i,1),l.rel="stylesheet",l.href=t);var g=function(e,t){if(l.onerror=l.onload=null,l.removeAttribute(i),clearTimeout(m),t&&"load"!=t.type&&l.parentNode.removeChild(l),r(t),e)return e(t)};if(l.getAttribute(i)){var m=setTimeout(g.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=g.bind(null,l.onerror),l.onload=g.bind(null,l.onload)}else g(void 0,{type:"load",target:l});return a?a.parentNode.insertBefore(l,a):o&&document.head.appendChild(l),l},v.f.css=function(e,t){var r=v.o(a,e)?a[e]:void 0;if(0!==r){if(r)t.push(r[2]);else if(980==e){var n=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=n);var i=v.p+v.k(e),o=Error();l(e,i,function(t){if(v.o(a,e)&&(0!==(r=a[e])&&(a[e]=void 0),r)){if("load"!==t.type){var n=t&&t.type,i=t&&t.target&&t.target.src;o.message="Loading css chunk "+e+" failed.\n("+n+": "+i+")",o.name="ChunkLoadError",o.type=n,o.request=i,r[1](o)}else r[0]()}})}else a[e]=0}},o=function(e,t){var r=t[0];e&&e(t);for(var n=0;n<r.length;n++)void 0===a[r[n]]&&(a[r[n]]=0)},(s=self.webpackChunkclient=self.webpackChunkclient||[]).forEach(o.bind(null,0)),s.push=o.bind(null,s.push.bind(s)),d={980:0},v.f.j=function(e,t){var r=v.o(d,e)?d[e]:void 0;if(0!==r){if(r)t.push(r[2]);else{var a=new Promise(function(t,a){r=d[e]=[t,a]});t.push(r[2]=a);var n=v.p+v.u(e),i=Error();v.l(n,function(t){if(v.o(d,e)&&(0!==(r=d[e])&&(d[e]=void 0),r)){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",i.name="ChunkLoadError",i.type=a,i.request=n,r[1](i)}},"chunk-"+e,e)}}},v.O.j=function(e){return 0===d[e]},u=function(e,t){var r=t[0],a=t[1],n=t[2],i,l,o=0;if(r.some(function(e){return 0!==d[e]})){for(i in a)v.o(a,i)&&(v.m[i]=a[i]);if(n)var s=n(v)}for(e&&e(t);o<r.length;o++)l=r[o],v.o(d,l)&&d[l]&&d[l][0](),d[l]=0;return v.O(s)},(c=self.webpackChunkclient=self.webpackChunkclient||[]).forEach(u.bind(null,0)),c.push=u.bind(null,c.push.bind(c));var m=v.O(void 0,["707","126","139","206"],function(){return v("99505")});v.O(m)}();