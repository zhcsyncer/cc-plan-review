!function(){var e,t,r,a,n,o,l,i,s,d,u,c,p={94542:function(e,t,r){"use strict";let a=r("84526").Z;t.Z=a},85836:function(e,t,r){"use strict";let a=r("41175").Z;t.Z=a},11303:function(e,t,r){"use strict";let a=r("10439").Z;t.Z=a},54017:function(e,t,r){"use strict";let a=r("56795").Z;t.Z=a},74966:function(e,t,r){"use strict";var a=r("20905");r("84286");let n=(0,r("9572").default)(a.Z,[["__scopeId","data-v-3e2252b4"]]);t.Z=n},99944:function(e,t,r){"use strict";let a=r("35208").Z;t.Z=a},73505:function(e,t,r){"use strict";let a=r("85409").Z;t.Z=a},6185:function(e,t,r){"use strict";let a=r("58029").Z;t.Z=a},84526:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("58777")},41175:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("40841")},10439:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("49044")},56795:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("77132")},20905:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("89440")},35208:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("18775")},85409:function(e,t,r){"use strict";r.d(t,{Z:function(){return a.Z}});var a=r("70748")},58777:function(e,t,r){"use strict";r("1056"),r("66364"),r("31907"),r("67475"),r("64072"),r("87395"),r("34210"),r("19608"),r("18936"),r("54335"),r("11160"),r("75698");var a=r("26463"),n=r("78276"),o=r("35818"),l=r("86367"),i=r("74966"),s=r("73505"),d=r("6185"),u=r("85836"),c=r("54017"),p=r("11303"),v=r("998"),g=r("68277");let m={class:"h-screen flex flex-col bg-app-bg-light dark:bg-app-bg-dark overflow-hidden transition-colors duration-200"},f={class:"bg-app-surface-light dark:bg-app-surface-dark border-b border-border-light dark:border-border-dark px-6 py-3 shadow-sm flex items-center justify-between transition-colors duration-200"},x={class:"flex items-center gap-4"},h=["title"],k={key:0,class:"text-2xl"},b={key:1,class:"text-2xl"},y={key:0,class:"text-green-600 font-medium flex items-center gap-2"},w={key:1,class:"text-orange-500 font-medium flex items-center gap-2 animate-pulse"},_={key:2,class:"text-purple-600 font-medium flex items-center gap-2"},C={key:3,class:"text-blue-600 font-medium flex items-center gap-2"},D={class:"flex-1 flex overflow-hidden relative"},S={key:0,class:"absolute inset-0 flex items-center justify-center bg-app-surface-light dark:bg-app-surface-dark z-10 text-text-primary-light dark:text-text-primary-dark transition-colors duration-200"},Z={key:1,class:"absolute inset-0 flex items-center justify-center bg-app-surface-light dark:bg-app-surface-dark z-10 text-red-600 transition-colors duration-200"},H={key:2,class:"absolute inset-0 flex flex-col items-center justify-center bg-app-surface-light dark:bg-app-surface-dark z-10 space-y-4 transition-colors duration-200"},E={key:0,class:"text-lg font-medium text-claude-primary dark:text-claude-primary-dark"},q={key:1,class:"text-sm text-text-secondary-light dark:text-text-secondary-dark"},z={key:3,class:"absolute inset-0 flex flex-col items-center justify-center bg-app-surface-light dark:bg-app-surface-dark z-10 space-y-4 transition-colors duration-200"},A={class:"flex-1 overflow-y-auto px-6 lg:px-12"},j={class:"max-w-5xl mx-auto py-12"},L={class:"mb-6"},T={key:0,class:"mb-4 px-4 py-3 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200 text-sm flex items-center justify-between"},U={class:"w-[30%] min-w-[320px] max-w-[480px] shadow-2xl z-10"},V={key:0,class:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-center justify-center p-4 transition-colors duration-200"},F={class:"bg-app-surface-light dark:bg-app-surface-dark rounded-lg shadow-xl w-full max-w-md p-6 transition-colors duration-200"},O={class:"bg-app-surface-alt-light dark:bg-app-surface-alt-dark p-3 rounded border border-border-light dark:border-border-dark mb-4 text-sm italic text-text-secondary-light dark:text-text-secondary-dark max-h-32 overflow-y-auto transition-colors duration-200"},K={class:"flex justify-end gap-3"},N=["disabled"],I={class:"text-xs opacity-70"},P={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-pulse"};t.Z=(0,a.aZ)({__name:"App",setup(e){let t=(0,l.iH)(""),r=(0,l.iH)(""),$=(0,l.iH)([]),R=(0,l.iH)(!0),W=(0,l.iH)("open"),Y=(0,l.iH)(""),M=(0,l.iH)(null),B=(0,l.iH)(!1),Q=null,J=(0,l.iH)([]),G=(0,l.iH)(""),X=(0,l.iH)(""),ee=(0,l.iH)(!1),et=(0,l.iH)(null),er=(0,l.iH)(!1),ea=(0,l.iH)(""),en=(0,l.iH)(3),eo=null,el=(0,l.iH)(!1),ei=(0,l.iH)(!1),es=null,ed=(0,l.iH)(!1),eu=(0,l.iH)(null),ec=(0,a.Fl)(()=>"changes_requested"===W.value||"approved"===W.value),ep=(0,a.Fl)(()=>"approved"===W.value),ev=(0,a.Fl)(()=>"changes_requested"===W.value),eg=(0,a.Fl)(()=>"discussing"===W.value),em=(0,l.iH)(!1);function ef(){em.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",em.value?"dark":"light")}function ex(){em.value=!em.value,ef()}(0,a.YP)(em,ef);let eh=(0,l.iH)(!1),ek=(0,l.iH)(""),eb=(0,l.iH)(null),ey=(0,l.iH)(null),ew=(0,l.iH)(""),e_=(0,l.iH)(null),eC=(0,a.Fl)(()=>navigator.platform.toUpperCase().includes("MAC")),eD=(0,a.Fl)(()=>eC.value?"\u2318\u21B5":"Ctrl+\u21B5");(0,a.YP)(eh,e=>{e&&(0,a.Y3)(()=>{var e;null===(e=e_.value)||void 0===e||e.focus()})});async function eS(e){G.value=e.version.versionHash,r.value=e.content,X.value=e.version.versionHash;try{let e=await fetch(`/api/reviews/${t.value}/versions`);if(e.ok){let t=await e.json();J.value=t.versions}}catch{-1===J.value.findIndex(t=>t.versionHash===e.version.versionHash)&&J.value.push({versionHash:e.version.versionHash,createdAt:e.version.createdAt,changeDescription:e.version.changeDescription,author:e.version.author,isCurrent:!0,hasSameContent:!0}),J.value=J.value.map(t=>({...t,isCurrent:t.versionHash===e.version.versionHash,hasSameContent:t.versionHash===e.version.versionHash||t.hasSameContent}))}for(let t of e.resolvedComments){let e=$.value.find(e=>e.id===t.commentId);e&&(e.resolved=!0)}console.log("[App] Version updated:",e.version.versionHash.substring(0,8))}(0,a.bv)(async()=>{!function(){let e=localStorage.getItem("theme");e?em.value="dark"===e:em.value=window.matchMedia("(prefers-color-scheme: dark)").matches,ef()}();let e=window.location.pathname.split("/"),r=e.find((t,r)=>"review"===e[r-1]);if(!r){Y.value="Invalid URL: No Review ID found.",R.value=!1;return}t.value=r});let{isConnected:eZ,disconnect:eH}=(0,v.D)(t,{onConnected:function(e){let t=e.review;if(r.value=t.planContent,$.value=t.comments||[],G.value=t.currentVersion,X.value=t.currentVersion,W.value=t.status||"open",t.documentVersions){var a;let e=(null===(a=t.documentVersions.find(e=>e.versionHash===t.currentVersion))||void 0===a?void 0:a.content)||"";J.value=t.documentVersions.map(r=>({versionHash:r.versionHash,createdAt:r.createdAt,changeDescription:r.changeDescription,author:r.author,isCurrent:r.versionHash===t.currentVersion,hasSameContent:r.content===e}))}er.value=!0,R.value=!1},onStatusChanged:function(e){W.value=e.status,console.log("[App] Status changed:",e.previousStatus,"->",e.status),"approved"===e.status&&function(){en.value=3,eo=window.setInterval(()=>{en.value--,en.value<=0&&(eo&&(clearInterval(eo),eo=null),window.close())},1e3)}()},onVersionUpdated:eS,onQuestionsUpdated:function(e){for(let t of e.questions){let e=$.value.find(e=>e.id===t.commentId);e&&(e.question=t.question,"accepted"===t.question.type&&(e.resolved=!0))}console.log("[App] Questions updated:",e.questions.length,"questions")},onError:()=>{console.warn("[App] SSE connection error")}});async function eE(){let e=await fetch(`/api/reviews/${t.value}`);if(!e.ok)throw Error("Review not found");let a=await e.json();if(r.value=a.planContent,$.value=a.comments||[],G.value=a.currentVersion,X.value=a.currentVersion,W.value=a.status||"open",a.documentVersions){var n;let e=(null===(n=a.documentVersions.find(e=>e.versionHash===a.currentVersion))||void 0===n?void 0:n.content)||"";J.value=a.documentVersions.map(t=>({versionHash:t.versionHash,createdAt:t.createdAt,changeDescription:t.changeDescription,author:t.author,isCurrent:t.versionHash===a.currentVersion,hasSameContent:t.content===e}))}}async function eq(e){if(e===G.value){X.value=e,r.value=await ez(e)||r.value;return}let t=await ez(e);t&&(X.value=e,r.value=t)}async function ez(e){try{let r=await fetch(`/api/reviews/${t.value}/versions/${e}`);if(!r.ok)return null;return(await r.json()).content}catch{return null}}async function eA(e,r){try{let a=await fetch(`/api/reviews/${t.value}/diff?from=${e}&to=${r}`);if(!a.ok){alert("Failed to load diff");return}et.value=await a.json(),ee.value=!0}catch{alert("Error loading diff")}}async function ej(e){try{if(!(await fetch(`/api/reviews/${t.value}/rollback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({versionHash:e})})).ok){alert("Failed to rollback");return}await eE()}catch{alert("Error during rollback")}}function eL(e){ek.value=e.quote,eb.value=e.position,ey.value=e.boundingRect,ew.value="",eh.value=!0}async function eT(){if(ew.value.trim()&&eb.value)try{let e=await fetch(`/api/reviews/${t.value}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quote:ek.value,comment:ew.value,position:eb.value})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to add comment")}let r=await e.json();$.value.push(r),eh.value=!1,eb.value=null,ey.value=null}catch(e){alert(`Error adding comment: ${e.message}`)}}function eU(e){(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),eT())}async function eV(e,r){try{if(!(await fetch(`/api/reviews/${t.value}/comments/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:r})})).ok)throw Error("Failed");let a=$.value.findIndex(t=>t.id===e);-1!==a&&($.value[a].comment=r)}catch(e){alert("Error updating comment")}}async function eF(e){if(confirm("Delete this comment?"))try{if(!(await fetch(`/api/reviews/${t.value}/comments/${e}`,{method:"DELETE"})).ok)throw Error("Failed");$.value=$.value.filter(t=>t.id!==e)}catch(e){alert("Error deleting comment")}}async function eO(){if(!B.value){B.value=!0,Q=window.setTimeout(()=>{B.value=!1,Q=null},3e3);return}Q&&(clearTimeout(Q),Q=null),B.value=!1;try{let e=$.value.filter(e=>!e.resolved),r=ea.value.trim();if(0!==e.length||r){let e={};if(r&&(e.note=r,ea.value=""),!(await fetch(`/api/reviews/${t.value}/request-changes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to request changes")}else if(!(await fetch(`/api/reviews/${t.value}/approve`,{method:"POST"})).ok)throw Error("Failed to approve")}catch(e){alert("Error submitting review")}}async function eK(e,r){try{if(!(await fetch(`/api/reviews/${t.value}/comments/${e}/answer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:r})})).ok)throw Error("Failed to submit answer");let a=$.value.find(t=>t.id===e);a&&(a.answer=r)}catch(e){alert("Error submitting answer")}}function eN(e){if(M.value=M.value===e?null:e,M.value===e){let t=document.querySelector(`mark[data-comment-id="${e}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}}function eI(e){M.value=M.value===e?null:e}function eP(e){ed.value=!!e,eu.value=e}function e$(){if(!ec.value&&!R.value&&!ep.value&&!ev.value){if(!ei.value){ei.value=!0,es=window.setTimeout(()=>{ei.value=!1,es=null},3e3);return}es&&(clearTimeout(es),es=null),ei.value=!1,eO()}}(0,a.Ah)(()=>{Q&&(clearTimeout(Q),Q=null),eo&&(clearInterval(eo),eo=null)});let eR=(0,a.Fl)(()=>J.value.findIndex(e=>e.versionHash===X.value)),{register:eW,isMac:eY}=(0,g.v5)(),eM=[];return(0,a.bv)(()=>{eM.push(eW({key:"p",modifiers:{mod:!0,shift:!0},handler:e$,description:"Approve / Submit Review",group:"Review"})),eM.push(eW({key:"c",handler:()=>{ed.value&&eu.value&&!ec.value&&eL(eu.value)},description:"Add comment to selected text",group:"Comments"})),eM.push(eW({key:"ArrowLeft",handler:()=>{let e=eR.value;e>0&&J.value.length>1&&eq(J.value[e-1].versionHash)},description:"Previous version",group:"Navigation"})),eM.push(eW({key:"ArrowRight",handler:()=>{let e=eR.value;e<J.value.length-1&&eq(J.value[e+1].versionHash)},description:"Next version",group:"Navigation"})),eM.push(eW({key:"?",handler:()=>{el.value=!0},description:"Show keyboard shortcuts",group:"General"})),eM.push(eW({key:"/",modifiers:{mod:!0},handler:()=>{el.value=!0},description:"Show keyboard shortcuts",group:"General"})),eM.push(eW({key:"Escape",handler:()=>{el.value?el.value=!1:eh.value?eh.value=!1:ee.value&&(ee.value=!1,et.value=null)},description:"Close modal / dialog",group:"General",enableInInput:!0}))}),(0,a.Ah)(()=>{eM.forEach(e=>e()),es&&(clearTimeout(es),es=null)}),(e,t)=>((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("header",f,[t[10]||(t[10]=(0,a._)("h1",{class:"font-bold text-lg text-text-primary-light dark:text-text-primary-dark"},"Claude Plan Review",-1)),(0,a._)("div",x,[(0,a._)("button",{onClick:ex,class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:em.value?"Switch to Light Mode":"Switch to Dark Mode"},[em.value?((0,a.wg)(),(0,a.iD)("span",k,"\u2600\uFE0F")):((0,a.wg)(),(0,a.iD)("span",b,"\uD83C\uDF19"))],8,h),"approved"===W.value?((0,a.wg)(),(0,a.iD)("div",y,[...t[6]||(t[6]=[(0,a._)("span",null,"\u2713 Approved",-1)])])):"changes_requested"===W.value?((0,a.wg)(),(0,a.iD)("div",w,[...t[7]||(t[7]=[(0,a._)("span",null,"\u23F3 Waiting for Agent...",-1)])])):"discussing"===W.value?((0,a.wg)(),(0,a.iD)("div",_,[...t[8]||(t[8]=[(0,a._)("span",null,"\u2753 Questions from Agent",-1)])])):"updated"===W.value?((0,a.wg)(),(0,a.iD)("div",C,[...t[9]||(t[9]=[(0,a._)("span",null,"\uD83D\uDCDD New Revision Available",-1)])])):(0,a.kq)("",!0)])]),(0,a._)("main",D,[R.value?((0,a.wg)(),(0,a.iD)("div",S," Loading... ")):Y.value?((0,a.wg)(),(0,a.iD)("div",Z,(0,n.zw)(Y.value),1)):ep.value?((0,a.wg)(),(0,a.iD)("div",H,[t[11]||(t[11]=(0,a._)("div",{class:"text-4xl mb-2"},"\uD83C\uDF89",-1)),t[12]||(t[12]=(0,a._)("h2",{class:"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark"},"Plan Approved!",-1)),t[13]||(t[13]=(0,a._)("p",{class:"text-text-secondary-light dark:text-text-secondary-dark"},"You can close this window and return to Claude.",-1)),en.value>0?((0,a.wg)(),(0,a.iD)("p",E," Window closing in "+(0,n.zw)(en.value)+"s... ",1)):((0,a.wg)(),(0,a.iD)("p",q,' Type "continue" in the chat. '))])):ev.value?((0,a.wg)(),(0,a.iD)("div",z,[...t[14]||(t[14]=[(0,a._)("div",{class:"text-4xl mb-2 animate-bounce"},"\u23F3",-1),(0,a._)("h2",{class:"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark"},"Feedback Submitted",-1),(0,a._)("p",{class:"text-text-secondary-light dark:text-text-secondary-dark"},"Waiting for Agent to process your feedback...",-1),(0,a._)("p",{class:"text-sm text-text-secondary-light dark:text-text-secondary-dark"},"This page will update automatically.",-1)])])):((0,a.wg)(),(0,a.iD)(a.HY,{key:4},[(0,a._)("div",A,[(0,a._)("div",j,[(0,a._)("div",L,[(0,a.Wm)(d.Z,{versions:J.value,"current-version":G.value,"selected-version":X.value,onSelectVersion:eq,onCompareVersions:eA,onRollback:ej},null,8,["versions","current-version","selected-version"])]),X.value!==G.value?((0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("span",null," You are viewing a historical version ("+(0,n.zw)(X.value.substring(0,8))+"). Comments are not editable in this view. ",1),(0,a._)("button",{onClick:t[0]||(t[0]=e=>eq(G.value)),class:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors text-xs"}," Back to Current ")])):(0,a.kq)("",!0),(0,a.Wm)(i.Z,{content:r.value,comments:$.value,"active-comment-id":M.value,"is-historical-version":X.value!==G.value,"current-version":X.value,onRequestComment:eL,onHighlightClick:eI,onSelectionChange:eP},null,8,["content","comments","active-comment-id","is-historical-version","current-version"])])]),(0,a._)("div",U,[(0,a.Wm)(s.Z,{comments:$.value,"confirm-pending":B.value,"review-status":W.value,"is-read-only":ec.value,"has-questions":eg.value,"approval-note":ea.value,"onUpdate:approvalNote":t[1]||(t[1]=e=>ea.value=e),onUpdateComment:eV,onDeleteComment:eF,onSubmitReview:eO,onSubmitWithNote:eO,onCommentClick:eN,onAnswerQuestion:eK},null,8,["comments","confirm-pending","review-status","is-read-only","has-questions","approval-note"])])],64))]),eh.value?((0,a.wg)(),(0,a.iD)("div",V,[(0,a._)("div",F,[t[16]||(t[16]=(0,a._)("h3",{class:"text-lg font-bold mb-4 text-text-primary-light dark:text-text-primary-dark"},"Add Comment",-1)),(0,a._)("div",O,' "'+(0,n.zw)(ek.value)+'" ',1),(0,a.wy)((0,a._)("textarea",{ref_key:"commentTextareaRef",ref:e_,"onUpdate:modelValue":t[2]||(t[2]=e=>ew.value=e),class:"w-full border border-border-light dark:border-border-dark rounded p-3 mb-4 focus:ring-2 focus:ring-claude-primary dark:focus:ring-claude-primary-dark outline-none bg-app-surface-light dark:bg-app-surface-dark text-text-primary-light dark:text-text-primary-dark transition-colors duration-200",rows:"4",placeholder:"Type your comment here...",onKeydown:eU},null,544),[[o.nr,ew.value]]),(0,a._)("div",K,[(0,a._)("button",{onClick:t[3]||(t[3]=e=>eh.value=!1),class:"px-4 py-2 text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors"}," Cancel "),(0,a._)("button",{onClick:eT,class:"px-4 py-2 bg-claude-primary dark:bg-claude-primary-dark text-white rounded hover:bg-claude-primary-hover disabled:opacity-50 transition-colors flex items-center gap-2",disabled:!ew.value.trim()},[t[15]||(t[15]=(0,a.Uk)(" Add Comment ",-1)),(0,a._)("span",I,(0,n.zw)(eD.value),1)],8,N)])])])):(0,a.kq)("",!0),ee.value&&et.value?((0,a.wg)(),(0,a.j4)(u.Z,{key:1,diff:et.value,onClose:t[4]||(t[4]=e=>{ee.value=!1,et.value=null})},null,8,["diff"])):(0,a.kq)("",!0),(0,a.Wm)(c.Z,{visible:el.value,onClose:t[5]||(t[5]=e=>el.value=!1)},null,8,["visible"]),(0,a.Wm)(o.uT,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-4"},{default:(0,a.w5)(()=>[ei.value?((0,a.wg)(),(0,a.iD)("div",P,[t[17]||(t[17]=(0,a._)("span",null,"Press",-1)),(0,a.Wm)(p.Z,{keys:"mod+shift+p",class:"!bg-red-800 !border-red-500"}),t[18]||(t[18]=(0,a._)("span",null,"again to confirm",-1))])):(0,a.kq)("",!0)]),_:1})]))}})},40841:function(e,t,r){"use strict";r("34210");var a=r("26463"),n=r("78276"),o=r("86367"),l=r("2341"),i=r("86358"),s=r("47136"),d=r("20309"),u=r("93040"),c=r("25822");let p={class:"diff-viewer fixed inset-0 z-50 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4"},v={class:"bg-app-surface-light dark:bg-app-surface-dark rounded-lg shadow-2xl w-full max-w-[90vw] max-h-[90vh] flex flex-col transition-colors duration-200"},g={class:"flex items-center justify-between px-6 py-4 border-b border-border-light dark:border-border-dark"},m={class:"flex items-center gap-4"},f={class:"flex items-center gap-2 text-sm"},x={class:"px-2 py-1 rounded bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 font-mono"},h={class:"px-2 py-1 rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 font-mono"},k={class:"flex items-center gap-4"},b={class:"flex items-center gap-3 text-sm"},y={class:"flex items-center gap-1 text-green-600 dark:text-green-400"},w={class:"flex items-center gap-1 text-red-600 dark:text-red-400"},_={class:"flex items-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"},C={class:"flex items-center rounded-lg border border-border-light dark:border-border-dark overflow-hidden"},D={class:"flex-1 overflow-auto"},S={key:0,class:"font-mono text-sm"},Z={class:"flex-shrink-0 w-20 flex text-text-secondary-light dark:text-text-secondary-dark text-xs select-none"},H={class:"w-10 px-2 py-1 text-right border-r border-border-light dark:border-border-dark"},E={class:"w-10 px-2 py-1 text-right border-r border-border-light dark:border-border-dark"},q={key:1,class:"flex font-mono text-sm h-full"},z={class:"flex-1 border-r border-border-light dark:border-border-dark overflow-auto"},A={class:"sticky top-0 px-4 py-2 bg-red-50 dark:bg-red-900/20 border-b border-border-light dark:border-border-dark text-xs text-red-700 dark:text-red-400 font-medium"},j={class:"flex-shrink-0 w-12 px-2 py-1 text-right text-xs text-text-secondary-light dark:text-text-secondary-dark border-r border-border-light dark:border-border-dark select-none"},L={class:"flex-1 overflow-auto"},T={class:"sticky top-0 px-4 py-2 bg-green-50 dark:bg-green-900/20 border-b border-border-light dark:border-border-dark text-xs text-green-700 dark:text-green-400 font-medium"},U={class:"flex-shrink-0 w-12 px-2 py-1 text-right text-xs text-text-secondary-light dark:text-text-secondary-dark border-r border-border-light dark:border-border-dark select-none"},V={class:"px-6 py-3 border-t border-border-light dark:border-border-dark flex justify-end"};t.Z=(0,a.aZ)({__name:"DiffViewer",props:{diff:{}},emits:["close"],setup(e,t){let{emit:r}=t,F=(0,o.iH)("split");function O(e){return e.substring(0,8)}let K=(0,a.Fl)(()=>{let t=[],r=[],a=0,n=e.diff.lines;for(;a<n.length;){let e=n[a];if("unchanged"===e.type)t.push(e),r.push(e),a++;else if("removed"===e.type){let e=[];for(;a<n.length&&"removed"===n[a].type;)e.push(n[a]),a++;let o=[];for(;a<n.length&&"added"===n[a].type;)o.push(n[a]),a++;let l=Math.max(e.length,o.length);for(let a=0;a<l;a++)t.push(a<e.length?e[a]:null),r.push(a<o.length?o[a]:null)}else"added"===e.type&&(t.push(null),r.push(e),a++)}return{left:t,right:r}});return(t,N)=>((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("div",v,[(0,a._)("div",g,[(0,a._)("div",m,[N[5]||(N[5]=(0,a._)("h2",{class:"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark"}," Version Comparison ",-1)),(0,a._)("div",f,[(0,a._)("code",x,(0,n.zw)(O(e.diff.fromVersion)),1),N[4]||(N[4]=(0,a._)("span",{class:"text-text-secondary-light dark:text-text-secondary-dark"},"\u2192",-1)),(0,a._)("code",h,(0,n.zw)(O(e.diff.toVersion)),1)])]),(0,a._)("div",k,[(0,a._)("div",b,[(0,a._)("span",y,[(0,a.Wm)((0,o.SU)(l.Z),{size:14}),(0,a.Uk)(" "+(0,n.zw)(e.diff.stats.additions),1)]),(0,a._)("span",w,[(0,a.Wm)((0,o.SU)(i.Z),{size:14}),(0,a.Uk)(" "+(0,n.zw)(e.diff.stats.deletions),1)]),(0,a._)("span",_,[(0,a.Wm)((0,o.SU)(s.Z),{size:14}),(0,a.Uk)(" "+(0,n.zw)(e.diff.stats.unchanged),1)])]),(0,a._)("div",C,[(0,a._)("button",{onClick:N[0]||(N[0]=e=>F.value="unified"),class:(0,n.C_)(["flex items-center gap-1.5 px-3 py-1.5 text-sm transition-colors","unified"===F.value?"bg-claude-primary text-white":"bg-transparent text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800"])},[(0,a.Wm)((0,o.SU)(d.Z),{size:14}),N[6]||(N[6]=(0,a.Uk)(" Unified ",-1))],2),(0,a._)("button",{onClick:N[1]||(N[1]=e=>F.value="split"),class:(0,n.C_)(["flex items-center gap-1.5 px-3 py-1.5 text-sm transition-colors","split"===F.value?"bg-claude-primary text-white":"bg-transparent text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800"])},[(0,a.Wm)((0,o.SU)(u.Z),{size:14}),N[7]||(N[7]=(0,a.Uk)(" Split ",-1))],2)]),(0,a._)("button",{onClick:N[2]||(N[2]=e=>r("close")),class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-text-secondary-light dark:text-text-secondary-dark transition-colors"},[(0,a.Wm)((0,o.SU)(c.Z),{size:20})])])]),(0,a._)("div",D,["unified"===F.value?((0,a.wg)(),(0,a.iD)("div",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.diff.lines,(e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:(0,n.C_)(["flex border-b border-border-light/50 dark:border-border-dark/50","added"===e.type?"bg-green-50 dark:bg-green-900/20":"","removed"===e.type?"bg-red-50 dark:bg-red-900/20":""])},[(0,a._)("div",Z,[(0,a._)("span",H,(0,n.zw)(e.oldLineNumber||""),1),(0,a._)("span",E,(0,n.zw)(e.newLineNumber||""),1)]),(0,a._)("div",{class:(0,n.C_)(["flex-shrink-0 w-6 text-center py-1 select-none","added"===e.type?"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/40":"","removed"===e.type?"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/40":""])},(0,n.zw)("added"===e.type?"+":"removed"===e.type?"-":" "),3),(0,a._)("pre",{class:(0,n.C_)(["flex-1 py-1 px-4 whitespace-pre-wrap break-all","added"===e.type?"text-green-800 dark:text-green-200":"","removed"===e.type?"text-red-800 dark:text-red-200":"text-text-primary-light dark:text-text-primary-dark"])},(0,n.zw)(e.content),3)],2))),128))])):((0,a.wg)(),(0,a.iD)("div",q,[(0,a._)("div",z,[(0,a._)("div",A,(0,n.zw)(O(e.diff.fromVersion))+" (Base) ",1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.value.left,(e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:"left-"+t,class:(0,n.C_)(["flex border-b border-border-light/50 dark:border-border-dark/50 min-h-[28px]",(null==e?void 0:e.type)==="removed"?"bg-red-50 dark:bg-red-900/20":""])},[e?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("span",j,(0,n.zw)(e.oldLineNumber||""),1),(0,a._)("pre",{class:(0,n.C_)(["flex-1 py-1 px-4 whitespace-pre-wrap break-all","removed"===e.type?"text-red-800 dark:text-red-200":"text-text-primary-light dark:text-text-primary-dark"])},(0,n.zw)(e.content),3)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[N[8]||(N[8]=(0,a._)("span",{class:"flex-shrink-0 w-12 px-2 py-1 border-r border-border-light dark:border-border-dark"},null,-1)),N[9]||(N[9]=(0,a._)("span",{class:"flex-1 py-1 px-4 bg-gray-50 dark:bg-gray-800/50"},null,-1))],64))],2))),128))]),(0,a._)("div",L,[(0,a._)("div",T,(0,n.zw)(O(e.diff.toVersion))+" (Target) ",1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.value.right,(e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:"right-"+t,class:(0,n.C_)(["flex border-b border-border-light/50 dark:border-border-dark/50 min-h-[28px]",(null==e?void 0:e.type)==="added"?"bg-green-50 dark:bg-green-900/20":""])},[e?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("span",U,(0,n.zw)(e.newLineNumber||""),1),(0,a._)("pre",{class:(0,n.C_)(["flex-1 py-1 px-4 whitespace-pre-wrap break-all","added"===e.type?"text-green-800 dark:text-green-200":"text-text-primary-light dark:text-text-primary-dark"])},(0,n.zw)(e.content),3)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[N[10]||(N[10]=(0,a._)("span",{class:"flex-shrink-0 w-12 px-2 py-1 border-r border-border-light dark:border-border-dark"},null,-1)),N[11]||(N[11]=(0,a._)("span",{class:"flex-1 py-1 px-4 bg-gray-50 dark:bg-gray-800/50"},null,-1))],64))],2))),128))])]))]),(0,a._)("div",V,[(0,a._)("button",{onClick:N[3]||(N[3]=e=>r("close")),class:"px-4 py-2 bg-claude-primary dark:bg-claude-primary-dark text-white rounded-lg hover:bg-claude-primary-hover transition-colors"}," Close ")])])]))}})},49044:function(e,t,r){"use strict";r("64072"),r("87395");var a=r("26463"),n=r("78276"),o=r("68277");let l={class:"inline-flex items-center gap-0.5"},i={class:"inline-flex items-center justify-center min-w-[1.25rem] px-1.5 py-0.5 text-xs font-medium bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm text-text-secondary-light dark:text-text-secondary-dark"},s={key:0,class:"text-xs text-text-secondary-light dark:text-text-secondary-dark"};t.Z=(0,a.aZ)({__name:"Kbd",props:{keys:{}},setup(e){let t=(0,a.Fl)(()=>e.keys.toLowerCase().split("+").map(e=>{switch(e){case"mod":return o.V5.value?"\u2318":"Ctrl";case"shift":return o.V5.value?"\u21E7":"Shift";case"alt":return o.V5.value?"\u2325":"Alt";case"ctrl":return o.V5.value?"\u2303":"Ctrl";case"enter":return o.V5.value?"\u21B5":"Enter";case"space":return o.V5.value?"\u2423":"Space";case"esc":case"escape":return"Esc";case"arrowleft":case"left":return"\u2190";case"arrowright":case"right":return"\u2192";case"arrowup":case"up":return"\u2191";case"arrowdown":case"down":return"\u2193";case"backspace":return"\u232B";case"delete":return"\u2326";case"tab":return"\u21E5";default:return e.toUpperCase()}})),r=(0,a.Fl)(()=>o.V5.value?"":"+");return(e,o)=>((0,a.wg)(),(0,a.iD)("span",l,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,(e,o)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:o},[(0,a._)("kbd",i,(0,n.zw)(e),1),o<t.value.length-1&&r.value?((0,a.wg)(),(0,a.iD)("span",s,(0,n.zw)(r.value),1)):(0,a.kq)("",!0)],64))),128))]))}})},77132:function(e,t,r){"use strict";r("34210"),r("1056");var a=r("26463"),n=r("35818"),o=r("86367"),l=r("78276"),i=r("25822"),s=r("68277"),d=r("11303");let u={class:"flex items-center justify-between px-6 py-4 border-b border-border-light dark:border-border-dark"},c={class:"p-6 max-h-[70vh] overflow-y-auto"},p={class:"text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-3 uppercase tracking-wider"},v={class:"space-y-2"},g={class:"text-text-primary-light dark:text-text-primary-dark"},m={key:0,class:"text-center text-text-secondary-light dark:text-text-secondary-dark py-8"},f={class:"px-6 py-4 border-t border-border-light dark:border-border-dark bg-gray-50 dark:bg-gray-900/50 rounded-b-lg"},x={class:"text-xs text-text-secondary-light dark:text-text-secondary-dark text-center"};t.Z=(0,a.aZ)({__name:"KeyboardHelpModal",props:{visible:{type:Boolean}},emits:["close"],setup(e,t){let{emit:r}=t,{getBindingsByGroup:h,isMac:k}=(0,s.v5)(),b=(0,a.Fl)(()=>h()),y=["General","Review","Comments","Navigation"],w=(0,a.Fl)(()=>{let e=b.value,t=[];for(let r of y)e[r]&&t.push({name:r,bindings:e[r]});for(let r of Object.keys(e))!y.includes(r)&&t.push({name:r,bindings:e[r]});return t});return(t,s)=>((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.Wm)(n.uT,{"enter-active-class":"transition-opacity duration-150","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:(0,a.w5)(()=>[e.visible?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"fixed inset-0 z-50 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4",onClick:s[2]||(s[2]=(0,n.iM)(e=>r("close"),["self"])),onKeydown:s[3]||(s[3]=(0,n.D2)(e=>r("close"),["escape"]))},[(0,a._)("div",{class:"bg-app-surface-light dark:bg-app-surface-dark rounded-lg shadow-xl w-full max-w-lg",onClick:s[1]||(s[1]=(0,n.iM)(()=>{},["stop"]))},[(0,a._)("div",u,[s[4]||(s[4]=(0,a._)("h2",{class:"text-lg font-semibold text-text-primary-light dark:text-text-primary-dark"}," Keyboard Shortcuts ",-1)),(0,a._)("button",{onClick:s[0]||(s[0]=e=>r("close")),class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 text-text-secondary-light dark:text-text-secondary-dark transition-colors"},[(0,a.Wm)((0,o.SU)(i.Z),{size:20})])]),(0,a._)("div",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.value,e=>((0,a.wg)(),(0,a.iD)("div",{key:e.name,class:"mb-6 last:mb-0"},[(0,a._)("h3",p,(0,l.zw)(e.name),1),(0,a._)("div",v,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.bindings,e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"flex items-center justify-between py-2 px-3 rounded hover:bg-gray-50 dark:hover:bg-gray-800/50"},[(0,a._)("span",g,(0,l.zw)(e.description),1),(0,a.Wm)(d.Z,{keys:function(e){let t=[],r=e.modifiers||{};return r.mod&&t.push("mod"),r.ctrl&&!r.mod&&t.push("ctrl"),r.shift&&t.push("shift"),r.alt&&t.push("alt"),t.push(e.key),t.join("+")}(e)},null,8,["keys"])]))),128))])]))),128)),0===w.value.length?((0,a.wg)(),(0,a.iD)("div",m," No keyboard shortcuts registered. ")):(0,a.kq)("",!0)]),(0,a._)("div",f,[(0,a._)("p",x,[s[5]||(s[5]=(0,a.Uk)(" Press ",-1)),(0,a.Wm)(d.Z,{keys:"esc"}),s[6]||(s[6]=(0,a.Uk)(" to close this dialog ",-1))])])])],32)):(0,a.kq)("",!0)]),_:1})]))}})},89440:function(e,t,r){"use strict";r("18936"),r("54335"),r("67475"),r("11160"),r("75698");var a=r("26463"),n=r("78276"),o=r("86367"),l=r("9366"),i=r("9382"),s=r("3835"),d=r("82000"),u=r.n(d),c=r("15979"),p=r("82763"),v=r("66164"),g=r("72959"),m=r("13219"),f=r("84893"),x=r("2633"),h=r("33219"),k=r("95411"),b=r("90751"),y=r("25569"),w=r("86790");let _={class:"relative"},C=["innerHTML"];t.Z=(0,a.aZ)({__name:"PlanViewer",props:{content:{},comments:{},activeCommentId:{},isHistoricalVersion:{type:Boolean},currentVersion:{}},emits:["request-comment","highlight-click","selection-change"],setup(e,t){let{emit:r}=t;s.Z.registerLanguage("javascript",c.Z),s.Z.registerLanguage("typescript",p.Z),s.Z.registerLanguage("python",v.Z),s.Z.registerLanguage("java",g.Z),s.Z.registerLanguage("cpp",m.Z),s.Z.registerLanguage("rust",f.Z),s.Z.registerLanguage("go",x.Z),s.Z.registerLanguage("bash",h.Z),s.Z.registerLanguage("json",k.Z),s.Z.registerLanguage("xml",b.Z),s.Z.registerLanguage("html",b.Z),s.Z.registerLanguage("css",y.Z),s.Z.registerLanguage("sql",w.Z);let d=(0,o.iH)(null);function D(){d.value&&d.value.unmark({done:()=>{e.comments.filter(t=>t.documentVersion===e.currentVersion).forEach(e=>{var t;null===(t=d.value)||void 0===t||t.mark(e.quote,{className:"comment-highlight",acrossElements:!0,separateWordSearch:!1,each:t=>{t.dataset.commentId=e.id,t.addEventListener("click",()=>{r("highlight-click",e.id)})}})}),S()}})}function S(){document.querySelectorAll(".comment-highlight").forEach(t=>{t instanceof HTMLElement&&(e.activeCommentId&&t.dataset.commentId===e.activeCommentId?t.classList.add("active"):t.classList.remove("active"))})}(0,o.iH)(null),l.TU.setOptions({breaks:!0,gfm:!0});let Z=new l.TU.Renderer,H=Z.code.bind(Z);Z.code=function(e,t,r){if("mermaid"===t)return`<div class="mermaid">${e}</div>`;if(t&&s.Z.getLanguage(t))try{let r=s.Z.highlight(e,{language:t}).value;return`<pre class="hljs"><code class="language-${t}">${r}</code></pre>`}catch(e){console.error("Highlight error:",e)}return H(e,t,r)},l.TU.use({renderer:Z});let E=(0,a.Fl)(()=>l.TU.parse(e.content));async function q(){await (0,a.Y3)();let e=document.querySelectorAll(".mermaid");for(let t=0;t<e.length;t++){let r=e[t],a=r.textContent||"";try{let{svg:e}=await i.Z.render(`mermaid-${t}-${Date.now()}`,a);r.innerHTML=e}catch(e){console.error("Mermaid rendering error:",e),r.innerHTML=`<pre class="text-red-600">Error rendering diagram: ${e}</pre>`}}}(0,a.bv)(()=>{i.Z.initialize({startOnLoad:!1,theme:document.documentElement.classList.contains("dark")?"dark":"default",securityLevel:"loose"}),q(),(0,a.Y3)(()=>{let e=document.querySelector(".markdown-body");e&&(d.value=new(u())(e),D())})}),(0,a.YP)(()=>e.content,()=>{(0,a.Y3)(()=>{q();let e=document.querySelector(".markdown-body");e&&(d.value=new(u())(e),D())})}),(0,a.YP)(()=>e.comments,()=>{(0,a.Y3)(()=>{D()})},{deep:!0}),(0,a.YP)(()=>e.activeCommentId,()=>{S()}),(0,a.YP)(()=>e.currentVersion,()=>{(0,a.Y3)(()=>{D()})});let z=(0,o.iH)({top:"0px",left:"0px",display:"none"}),A=(0,o.iH)(""),j=(0,o.iH)(null);function L(t){let r=e.content.indexOf(t);if(-1===r){let r=t.replace(/\s+/g," "),a=e.content.replace(/\s+/g," ").indexOf(r);if(-1===a)return console.warn("Could not find quote in content:",t),{startOffset:0,endOffset:t.length};let n=0,o=0;for(;o<a&&n<e.content.length;){if(/\s/.test(e.content[n])){if(/\s/.test(e.content[n])){for(;n<e.content.length&&/\s/.test(e.content[n]);)n++;o++;continue}}else o++;n++}return{startOffset:n,endOffset:n+t.length}}return{startOffset:r,endOffset:r+t.length}}function T(){if(e.isHistoricalVersion){z.value.display="none",r("selection-change",null);return}let t=window.getSelection();if(!t||t.isCollapsed){z.value.display="none",r("selection-change",null);return}let a=t.toString().trim();if(!a){r("selection-change",null);return}let n=t.getRangeAt(0),o=n.commonAncestorContainer,l=o.nodeType===Node.TEXT_NODE?o.parentElement:o;if(null==l?void 0:l.closest(".comment-highlight")){z.value.display="none",r("selection-change",null);return}let i=n.getBoundingClientRect();z.value={top:`${i.top-40}px`,left:`${i.left}px`,display:"block"},A.value=a,j.value=n.cloneRange();let s=L(a);r("selection-change",{quote:a,position:s,boundingRect:i})}function U(){var e;if(!A.value||!j.value)return;let t=L(A.value),a=j.value.getBoundingClientRect();r("request-comment",{quote:A.value,position:t,boundingRect:a}),z.value.display="none",null===(e=window.getSelection())||void 0===e||e.removeAllRanges(),A.value="",j.value=null,r("selection-change",null)}return(t,r)=>((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("div",{class:(0,n.C_)(["markdown-body p-10 lg:p-12 bg-app-surface-light dark:bg-app-surface-dark shadow-md rounded-xl min-h-[80vh] transition-colors duration-200",e.isHistoricalVersion?"select-none cursor-default":""]),innerHTML:E.value,onMouseup:T},null,42,C),e.isHistoricalVersion||"none"===z.value.display?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,style:(0,n.j5)({top:z.value.top,left:z.value.left}),class:"fixed z-50 bg-claude-primary dark:bg-claude-primary-dark text-white px-4 py-2 rounded-full shadow-lg hover:bg-claude-primary-hover transition-colors text-sm font-medium flex items-center gap-2",onClick:U},[...r[0]||(r[0]=[(0,a._)("span",null,"\uD83D\uDCAC Comment",-1)])],4))]))}})},18775:function(e,t,r){"use strict";r("18936"),r("54335"),r("67475"),r("34210"),r("1056");var a=r("26463"),n=r("78276"),o=r("35818"),l=r("86367");let i={class:"question-input mt-3 p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800"},s={class:"text-sm text-purple-700 dark:text-purple-300 mb-2"},d={key:0,class:"flex items-center gap-2 text-green-600 dark:text-green-400"},u={key:1},c=["disabled"],p=["disabled"],v={key:1,class:"mt-2 text-sm text-green-600 dark:text-green-400"},g={key:2},m={class:"space-y-2"},f=["name","value","checked","onChange","disabled"],x={class:"text-sm text-text-primary-light dark:text-text-primary-dark"},h=["name","checked","disabled"],k={key:0,class:"ml-6"},b=["disabled"],y={key:1,class:"mt-2 text-sm text-green-600 dark:text-green-400"},w={key:3},_={class:"space-y-2"},C=["value","checked","onChange","disabled"],D={class:"text-sm text-text-primary-light dark:text-text-primary-dark"},S=["checked","disabled"],Z={key:0,class:"ml-6"},H=["disabled"],E={key:1,class:"mt-2 text-sm text-green-600 dark:text-green-400"};t.Z=(0,a.aZ)({__name:"QuestionInput",props:{question:{},answer:{},commentId:{}},emits:["answer"],setup(e,t){let{emit:r}=t,q=(0,l.iH)(e.answer||""),z=(0,l.iH)(e.answer||""),A=(0,l.iH)(e.answer?function(e){return e.split(", ").filter(e=>e.trim())}(e.answer):[]),j=(0,l.iH)(""),L=(0,l.iH)(!1),T=(0,a.Fl)(()=>"accepted"===e.question.type),U=(0,a.Fl)(()=>"choice"===e.question.type),V=(0,a.Fl)(()=>"multiChoice"===e.question.type),F=(0,a.Fl)(()=>"clarification"===e.question.type);function O(){let t="";if(U.value)L.value&&j.value.trim()?t=`Other: ${j.value.trim()}`:z.value&&(t=z.value);else if(V.value){let e=[...A.value];L.value&&j.value.trim()&&e.push(`Other: ${j.value.trim()}`),t=e.join(", ")}else F.value&&(t=q.value.trim());t&&r("answer",e.commentId,t)}function K(){z.value="",L.value=!0}function N(){L.value=!L.value}let I=(0,a.Fl)(()=>A.value.length>0||L.value&&j.value.trim());return(t,r)=>((0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",s,[r[3]||(r[3]=(0,a._)("span",{class:"font-medium"},"Agent:",-1)),(0,a.Uk)(" "+(0,n.zw)(e.question.message),1)]),T.value?((0,a.wg)(),(0,a.iD)("div",d,[...r[4]||(r[4]=[(0,a._)("span",null,"\u2713",-1),(0,a._)("span",{class:"text-sm"},"Accepted",-1)])])):F.value?((0,a.wg)(),(0,a.iD)("div",u,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":r[0]||(r[0]=e=>q.value=e),class:"w-full border border-purple-300 dark:border-purple-700 rounded p-2 text-sm bg-white dark:bg-gray-800 text-text-primary-light dark:text-text-primary-dark focus:ring-2 focus:ring-purple-500 outline-none",rows:"2",placeholder:"Type your clarification...",disabled:!!e.answer},null,8,c),[[o.nr,q.value]]),e.answer?((0,a.wg)(),(0,a.iD)("div",v," \u2713 Answered: "+(0,n.zw)(e.answer),1)):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:O,disabled:!q.value.trim(),class:"mt-2 px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Submit Answer ",8,p))])):U.value&&e.question.options?((0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.question.options,t=>((0,a.wg)(),(0,a.iD)("label",{key:t,class:(0,n.C_)(["flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-colors",{"bg-purple-100 dark:bg-purple-900/40":z.value===t}])},[(0,a._)("input",{type:"radio",name:`question-${e.commentId}`,value:t,checked:z.value===t,onChange:e=>{var r;return r=t,void(z.value=r,L.value=!1)},disabled:!!e.answer,class:"text-purple-600"},null,40,f),(0,a._)("span",x,(0,n.zw)(t),1)],2))),128)),(0,a._)("label",{class:(0,n.C_)(["flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-colors",{"bg-purple-100 dark:bg-purple-900/40":L.value}])},[(0,a._)("input",{type:"radio",name:`question-${e.commentId}`,checked:L.value,onChange:K,disabled:!!e.answer,class:"text-purple-600"},null,40,h),r[5]||(r[5]=(0,a._)("span",{class:"text-sm text-text-primary-light dark:text-text-primary-dark"},"Other",-1))],2),L.value&&!e.answer?((0,a.wg)(),(0,a.iD)("div",k,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>j.value=e),type:"text",class:"w-full border border-purple-300 dark:border-purple-700 rounded p-2 text-sm bg-white dark:bg-gray-800 text-text-primary-light dark:text-text-primary-dark focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"Specify your choice..."},null,512),[[o.nr,j.value]])])):(0,a.kq)("",!0)]),e.answer?((0,a.wg)(),(0,a.iD)("div",y," \u2713 Selected: "+(0,n.zw)(e.answer),1)):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:O,disabled:!z.value&&(!L.value||!j.value.trim()),class:"mt-3 px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Submit Choice ",8,b))])):V.value&&e.question.options?((0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("div",_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.question.options,t=>((0,a.wg)(),(0,a.iD)("label",{key:t,class:(0,n.C_)(["flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-colors",{"bg-purple-100 dark:bg-purple-900/40":A.value.includes(t)}])},[(0,a._)("input",{type:"checkbox",value:t,checked:A.value.includes(t),onChange:e=>(function(e){let t=A.value.indexOf(e);t>=0?A.value.splice(t,1):A.value.push(e)})(t),disabled:!!e.answer,class:"text-purple-600 rounded"},null,40,C),(0,a._)("span",D,(0,n.zw)(t),1)],2))),128)),(0,a._)("label",{class:(0,n.C_)(["flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-colors",{"bg-purple-100 dark:bg-purple-900/40":L.value}])},[(0,a._)("input",{type:"checkbox",checked:L.value,onChange:N,disabled:!!e.answer,class:"text-purple-600 rounded"},null,40,S),r[6]||(r[6]=(0,a._)("span",{class:"text-sm text-text-primary-light dark:text-text-primary-dark"},"Other",-1))],2),L.value&&!e.answer?((0,a.wg)(),(0,a.iD)("div",Z,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>j.value=e),type:"text",class:"w-full border border-purple-300 dark:border-purple-700 rounded p-2 text-sm bg-white dark:bg-gray-800 text-text-primary-light dark:text-text-primary-dark focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"Specify your choice..."},null,512),[[o.nr,j.value]])])):(0,a.kq)("",!0)]),e.answer?((0,a.wg)(),(0,a.iD)("div",E," \u2713 Selected: "+(0,n.zw)(e.answer),1)):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:O,disabled:!I.value,class:"mt-3 px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Submit Choices ",8,H))])):(0,a.kq)("",!0)]))}})},70748:function(e,t,r){"use strict";r("18936"),r("54335"),r("67475"),r("67049"),r("67804");var a=r("26463"),n=r("78276"),o=r("35818"),l=r("86367"),i=r("34127"),s=r("70146"),d=r("7186"),u=r("8654"),c=r("25822"),p=r("88487"),v=r("99944"),g=r("11303");let m={class:"review-sidebar flex flex-col h-full bg-app-bg-light dark:bg-app-bg-dark border-l border-border-light dark:border-border-dark transition-colors duration-200"},f={class:"p-4 border-b border-border-light dark:border-border-dark bg-app-surface-light dark:bg-app-surface-dark transition-colors duration-200"},x={class:"font-semibold text-text-primary-light dark:text-text-primary-dark"},h={key:0,class:"text-sm font-normal text-text-secondary-light dark:text-text-secondary-dark"},k={key:0,class:"mt-2 text-sm text-purple-600 dark:text-purple-400"},b={class:"flex-1 overflow-y-auto p-4 space-y-4"},y={key:0,class:"text-center text-text-secondary-light dark:text-text-secondary-dark py-8"},w=["data-comment-id","onClick"],_={class:"text-xs text-text-secondary-light dark:text-text-secondary-dark border-l-2 border-claude-primary dark:border-claude-primary-dark pl-2 mb-2 italic truncate"},C={key:0},D=["onClick"],S={key:0,class:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},Z=["onClick"],H=["onClick"],E=["onUpdate:modelValue","onKeydown"],q={class:"flex justify-end gap-2"},z=["onClick"],A=["onClick"],j={key:1,class:"mt-4"},L={class:"text-sm text-text-secondary-light dark:text-text-secondary-dark cursor-pointer hover:text-text-primary-light dark:hover:text-text-primary-dark"},T={class:"mt-2 space-y-3"},U={class:"text-xs text-text-secondary-light dark:text-text-secondary-dark border-l-2 border-green-400 pl-2 mb-2 italic truncate"},V={class:"text-sm text-text-primary-light dark:text-text-primary-dark line-through"},F={class:"p-4 border-t border-border-light dark:border-border-dark bg-app-surface-light dark:bg-app-surface-dark transition-colors duration-200"},O={key:0,class:"mb-3"},K=["value"],N=["disabled"],I={key:1,class:"mt-2 text-xs text-center text-orange-600 dark:text-orange-400"};t.Z=(0,a.aZ)({__name:"ReviewSidebar",props:{comments:{},confirmPending:{type:Boolean},reviewStatus:{},isReadOnly:{type:Boolean},hasQuestions:{type:Boolean},approvalNote:{}},emits:["update-comment","delete-comment","submit-review","submit-with-note","comment-click","answer-question","update:approvalNote"],setup(e,t){let{emit:r}=t;function P(e){(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),r("submit-with-note"))}let $=(0,a.Fl)(()=>e.comments.filter(e=>!e.resolved)),R=(0,a.Fl)(()=>e.comments.filter(e=>e.resolved)),W=(0,a.Fl)(()=>!e.hasQuestions||$.value.every(e=>!e.question||"accepted"===e.question.type||!!e.answer)),Y=(0,a.Fl)(()=>{if(e.confirmPending)return"Click Again to Confirm";if("discussing"===e.reviewStatus)return W.value?"Submit Answers":"Answer All Questions";return $.value.length>0?"Submit Feedback":"Approve"}),M=(0,a.Fl)(()=>"discussing"===e.reviewStatus&&!W.value&&!0);function B(e){e.isEditing=!1}function Q(e){e.tempText&&e.tempText!==e.comment&&r("update-comment",e.id,e.tempText),e.isEditing=!1}function J(e,t){r("answer-question",e,t)}function G(e){let t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}return(t,X)=>((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("div",f,[(0,a._)("h2",x,[X[3]||(X[3]=(0,a.Uk)(" Review Comments ",-1)),$.value.length>0?((0,a.wg)(),(0,a.iD)("span",h," ("+(0,n.zw)($.value.length)+" active) ",1)):(0,a.kq)("",!0)]),e.hasQuestions?((0,a.wg)(),(0,a.iD)("div",k," Agent has questions for you. Please answer below. ")):(0,a.kq)("",!0)]),(0,a._)("div",b,[0===e.comments.length?((0,a.wg)(),(0,a.iD)("div",y," Select text in the plan to add comments. ")):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($.value,t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,"data-comment-id":t.id,class:(0,n.C_)(["bg-app-surface-light dark:bg-app-surface-dark p-3 rounded-lg shadow-sm border border-border-light dark:border-border-dark group hover:border-claude-primary dark:hover:border-claude-primary-dark transition-colors",{"cursor-pointer":!e.isReadOnly}]),onClick:e=>r("comment-click",t.id)},[(0,a._)("div",_,' "'+(0,n.zw)(t.quote)+'" ',1),t.isEditing?((0,a.wg)(),(0,a.iD)("div",{key:1,onClick:X[0]||(X[0]=(0,o.iM)(()=>{},["stop"]))},[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e=>t.tempText=e,class:"w-full text-sm border border-border-light dark:border-border-dark rounded p-2 mb-2 focus:ring-2 focus:ring-claude-primary dark:focus:ring-claude-primary-dark outline-none bg-app-surface-light dark:bg-app-surface-dark text-text-primary-light dark:text-text-primary-dark transition-colors duration-200 min-h-[60px] resize-none",placeholder:"Enter comment... (\u2318\u21B5 to save, Esc to cancel)",onKeydown:e=>{var r,a;return r=e,a=t,void((r.metaKey||r.ctrlKey)&&"Enter"===r.key?(r.preventDefault(),Q(a)):"Escape"===r.key&&(r.preventDefault(),B(a)))},onInput:G},null,40,E),[[o.nr,t.tempText]]),(0,a._)("div",q,[(0,a._)("button",{onClick:e=>B(t),class:"p-1 text-text-secondary-light dark:text-text-secondary-dark hover:text-text-primary-light dark:hover:text-text-primary-dark"},[(0,a.Wm)((0,l.SU)(c.Z),{size:16})],8,z),(0,a._)("button",{onClick:e=>Q(t),class:"p-1 text-green-600 hover:text-green-700"},[(0,a.Wm)((0,l.SU)(p.Z),{size:16})],8,A)])])):((0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",{class:(0,n.C_)(["text-sm text-text-primary-light dark:text-text-primary-dark mb-2 cursor-pointer",{"line-clamp-2":!t.isExpanded}]),onClick:(0,o.iM)(e=>{var r;(r=t).isExpanded=!r.isExpanded},["stop"])},[(0,a.Uk)((0,n.zw)(t.comment)+" ",1),((0,a.wg)(),(0,a.j4)((0,a.LL)(t.isExpanded?(0,l.SU)(i.Z):(0,l.SU)(s.Z)),{size:14,class:"inline-block ml-1 text-text-secondary-light dark:text-text-secondary-dark align-middle"}))],10,D),e.isReadOnly||t.question?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("button",{onClick:(0,o.iM)(r=>{var a;return a=t,void(!e.isReadOnly&&(a.isEditing=!0,a.tempText=a.comment))},["stop"]),class:"p-1 text-text-secondary-light dark:text-text-secondary-dark hover:text-claude-primary dark:hover:text-claude-primary-dark"},[(0,a.Wm)((0,l.SU)(d.Z),{size:14})],8,Z),(0,a._)("button",{onClick:(0,o.iM)(e=>r("delete-comment",t.id),["stop"]),class:"p-1 text-text-secondary-light dark:text-text-secondary-dark hover:text-red-600"},[(0,a.Wm)((0,l.SU)(u.Z),{size:14})],8,H)])),t.question?((0,a.wg)(),(0,a.j4)(v.Z,{key:1,question:t.question,answer:t.answer,"comment-id":t.id,onAnswer:J},null,8,["question","answer","comment-id"])):(0,a.kq)("",!0)]))],10,w))),128)),R.value.length>0?((0,a.wg)(),(0,a.iD)("details",j,[(0,a._)("summary",L,(0,n.zw)(R.value.length)+" resolved comment"+(0,n.zw)(R.value.length>1?"s":""),1),(0,a._)("div",T,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.value,e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-200 dark:border-green-800 opacity-75"},[X[4]||(X[4]=(0,a._)("div",{class:"flex items-center gap-2 mb-1"},[(0,a._)("span",{class:"text-green-600 dark:text-green-400"},"\u2713"),(0,a._)("span",{class:"text-xs text-green-700 dark:text-green-300"},"Resolved")],-1)),(0,a._)("div",U,' "'+(0,n.zw)(e.quote)+'" ',1),(0,a._)("div",V,(0,n.zw)(e.comment),1)]))),128))])])):(0,a.kq)("",!0)]),(0,a._)("div",F,[e.hasQuestions?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("details",O,[X[5]||(X[5]=(0,a._)("summary",{class:"text-sm text-text-secondary-light dark:text-text-secondary-dark cursor-pointer hover:text-text-primary-light dark:hover:text-text-primary-dark select-none"}," Add a global note (optional) ",-1)),(0,a._)("textarea",{value:e.approvalNote,onInput:X[1]||(X[1]=e=>r("update:approvalNote",e.target.value)),onKeydown:P,class:"w-full mt-2 text-sm border border-border-light dark:border-border-dark rounded-lg p-2 focus:ring-2 focus:ring-claude-primary dark:focus:ring-claude-primary-dark outline-none bg-app-surface-light dark:bg-app-surface-dark text-text-primary-light dark:text-text-primary-dark transition-colors duration-200 resize-none",rows:"2",placeholder:"Global review note (Cmd+Enter to submit)..."},null,40,K)])),(0,a._)("button",{onClick:X[2]||(X[2]=e=>r("submit-review")),disabled:M.value,class:(0,n.C_)(["w-full text-white py-2 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2",e.confirmPending?"bg-red-600 dark:bg-red-700 hover:bg-red-700 dark:hover:bg-red-800 animate-pulse":M.value?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-claude-primary dark:bg-claude-primary-dark hover:bg-claude-primary-hover"])},[(0,a._)("span",null,(0,n.zw)(Y.value),1),e.confirmPending||M.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(g.Z,{key:0,keys:"mod+shift+p",class:"!bg-white/20 !border-white/30 !text-white/80 !shadow-none"}))],10,N),e.hasQuestions&&!W.value?((0,a.wg)(),(0,a.iD)("p",I," Please answer all questions before submitting. ")):(0,a.kq)("",!0)])]))}})},58029:function(e,t,r){"use strict";var a=r("26463"),n=r("86367"),o=r("78276"),l=r("35818"),i=r("70336"),s=r("34127"),d=r("70146"),u=r("7478"),c=r("78015"),p=r("39237"),v=r("23303"),g=r("45258");let m={class:"version-panel bg-app-surface-light dark:bg-app-surface-dark border border-border-light dark:border-border-dark rounded-lg shadow-sm transition-colors duration-200"},f={class:"flex items-center gap-2"},x={class:"text-xs px-2 py-0.5 rounded-full bg-claude-primary-light dark:bg-claude-primary-dark/20 text-claude-primary dark:text-claude-primary-dark"},h={class:"flex items-center gap-2"},k={key:0,class:"text-xs text-text-secondary-light dark:text-text-secondary-dark"},b={key:0,class:"border-t border-border-light dark:border-border-dark"},y={class:"max-h-64 overflow-y-auto"},w=["onClick"],_={class:"flex items-start justify-between"},C={class:"flex-1 min-w-0"},D={class:"flex items-center gap-2 mb-1"},S={class:"text-xs font-mono text-claude-primary dark:text-claude-primary-dark"},Z={key:0,class:"text-xs px-1.5 py-0.5 rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"},H={key:1,class:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"},E={key:0,class:"text-sm text-text-primary-light dark:text-text-primary-dark truncate mb-1"},q={class:"flex items-center gap-3 text-xs text-text-secondary-light dark:text-text-secondary-dark"},z={class:"flex items-center gap-1"},A={key:0,class:"flex items-center gap-1"},j={key:0,class:"flex items-center gap-1 ml-2"},L=["onClick"],T=["onClick"];t.Z=(0,a.aZ)({__name:"VersionPanel",props:{versions:{},currentVersion:{},selectedVersion:{}},emits:["select-version","compare-versions","rollback"],setup(e,t){let{emit:r}=t,U=(0,n.iH)(!1),V=(0,a.Fl)(()=>[...e.versions].sort((e,t)=>t.createdAt-e.createdAt)),F=(0,a.Fl)(()=>V.value[0]);function O(e){return e.substring(0,8)}return(t,K)=>((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("div",{class:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-t-lg transition-colors",onClick:K[0]||(K[0]=e=>U.value=!U.value)},[(0,a._)("div",f,[(0,a.Wm)((0,n.SU)(i.Z),{size:18,class:"text-claude-primary dark:text-claude-primary-dark"}),K[1]||(K[1]=(0,a._)("span",{class:"font-medium text-text-primary-light dark:text-text-primary-dark"}," Version History ",-1)),(0,a._)("span",x,(0,o.zw)(e.versions.length),1)]),(0,a._)("div",h,[F.value?((0,a.wg)(),(0,a.iD)("span",k,(0,o.zw)(O(F.value.versionHash)),1)):(0,a.kq)("",!0),((0,a.wg)(),(0,a.j4)((0,a.LL)(U.value?(0,n.SU)(s.Z):(0,n.SU)(d.Z)),{size:18,class:"text-text-secondary-light dark:text-text-secondary-dark"}))])]),U.value?((0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(V.value,(t,i)=>((0,a.wg)(),(0,a.iD)("div",{key:t.versionHash,class:(0,o.C_)(["px-4 py-3 border-b border-border-light dark:border-border-dark last:border-b-0 cursor-pointer transition-colors",t.versionHash===e.selectedVersion?"bg-claude-primary-light dark:bg-claude-primary-dark/20":"hover:bg-gray-50 dark:hover:bg-gray-800/50"]),onClick:e=>{r("select-version",t.versionHash)}},[(0,a._)("div",_,[(0,a._)("div",C,[(0,a._)("div",D,[(0,a._)("code",S,(0,o.zw)(O(t.versionHash)),1),t.isCurrent?((0,a.wg)(),(0,a.iD)("span",Z," Current ")):(0,a.kq)("",!0),0!==i||t.isCurrent?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",H," Latest "))]),t.changeDescription?((0,a.wg)(),(0,a.iD)("div",E,(0,o.zw)(t.changeDescription),1)):(0,a.kq)("",!0),(0,a._)("div",q,[(0,a._)("span",z,[(0,a.Wm)((0,n.SU)(u.Z),{size:12}),(0,a.Uk)(" "+(0,o.zw)(function(e){let t=new Date(e),r=new Date().getTime()-e;return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:t.toLocaleDateString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}(t.createdAt)),1)]),t.author?((0,a.wg)(),(0,a.iD)("span",A,["agent"===t.author?((0,a.wg)(),(0,a.j4)((0,n.SU)(c.Z),{key:0,size:12})):((0,a.wg)(),(0,a.j4)((0,n.SU)(p.Z),{key:1,size:12})),(0,a.Uk)(" "+(0,o.zw)("agent"===t.author?"Agent":"Human"),1)])):(0,a.kq)("",!0)])]),t.isCurrent?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("button",{onClick:(0,l.iM)(a=>{r("compare-versions",t.versionHash,e.currentVersion)},["stop"]),class:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-text-secondary-light dark:text-text-secondary-dark hover:text-claude-primary dark:hover:text-claude-primary-dark transition-colors",title:"Compare with current version"},[(0,a.Wm)((0,n.SU)(v.Z),{size:14})],8,L),t.hasSameContent?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:(0,l.iM)(e=>{var a;return a=t,void(confirm(`Rollback to version ${O(a.versionHash)}?`)&&r("rollback",a.versionHash))},["stop"]),class:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-text-secondary-light dark:text-text-secondary-dark hover:text-claude-primary dark:hover:text-claude-primary-dark transition-colors",title:"Rollback to this version"},[(0,a.Wm)((0,n.SU)(g.Z),{size:14})],8,T))]))])],10,w))),128))])])):(0,a.kq)("",!0)]))}})},68277:function(e,t,r){"use strict";r.d(t,{V5:function(){return i},v5:function(){return c}}),r("93088"),r("87866"),r("12131"),r("6016"),r("28763"),r("96408"),r("56201"),r("45521"),r("81354"),r("73206"),r("82762"),r("78754"),r("5320"),r("69708"),r("34210"),r("62979");var a=r("86367"),n=r("26463");let o=(0,a.iH)(new Map),l=!1,i=(0,n.Fl)(()=>/Mac|iPod|iPhone|iPad/.test(navigator.platform)),s={mod:(0,n.Fl)(()=>i.value?"\u2318":"Ctrl"),shift:(0,n.Fl)(()=>i.value?"\u21E7":"Shift"),alt:(0,n.Fl)(()=>i.value?"\u2325":"Alt"),ctrl:(0,n.Fl)(()=>i.value?"\u2303":"Ctrl"),enter:(0,n.Fl)(()=>i.value?"\u21B5":"Enter"),space:(0,n.Fl)(()=>i.value?"\u2423":"Space"),esc:"Esc",left:"\u2190",right:"\u2192",up:"\u2191",down:"\u2193"};function d(){let e=document.activeElement;if(!e)return!1;let t=e.tagName.toLowerCase();return"input"===t||"textarea"===t||e.isContentEditable}function u(e){let t=e.key.toLowerCase();for(let r of o.value.values()){let a=r.key.toLowerCase();if(t!==a&&e.code.toLowerCase()!==a)continue;let n=r.modifiers||{},o=n.mod?i.value?e.metaKey:e.ctrlKey:!(i.value?e.metaKey:e.ctrlKey)||n.ctrl;n.ctrl?e.ctrlKey:e.ctrlKey&&n.mod;let l=n.shift?e.shiftKey:!e.shiftKey,s=n.alt?e.altKey:!e.altKey;if(!!o&&!!l&&!!s&&(!n.ctrl||!!e.ctrlKey)){if(!(!r.enableInInput&&d())){e.preventDefault(),r.handler();return}}}}function c(){function e(e){o.value.delete(e),0===o.value.size&&(!l||(window.removeEventListener("keydown",u),l=!1))}return(0,n.Ah)(()=>{}),{isMac:i,symbols:s,register:function(t){let r=function(e,t){let r=[];return(null==t?void 0:t.mod)&&r.push("mod"),(null==t?void 0:t.ctrl)&&r.push("ctrl"),(null==t?void 0:t.shift)&&r.push("shift"),(null==t?void 0:t.alt)&&r.push("alt"),r.push(e.toLowerCase()),r.join("+")}(t.key,t.modifiers),a={...t,id:r};return o.value.set(r,a),l||(window.addEventListener("keydown",u),l=!0),()=>e(r)},unregister:e,getBindingsByGroup:function(){let e={};for(let t of o.value.values())!e[t.group]&&(e[t.group]=[]),e[t.group].push(t);return e},formatKeys:function(e){let t=[],r=e.modifiers||{};return r.mod&&t.push(i.value?"\u2318":"Ctrl"),r.ctrl&&!r.mod&&t.push(i.value?"\u2303":"Ctrl"),r.shift&&t.push(i.value?"\u21E7":"Shift"),r.alt&&t.push(i.value?"\u2325":"Alt"),t.push({enter:i.value?"\u21B5":"Enter",escape:"Esc",arrowleft:"\u2190",arrowright:"\u2192",arrowup:"\u2191",arrowdown:"\u2193",space:i.value?"\u2423":"Space","/":"/","?":"?"}[e.key.toLowerCase()]||e.key.toUpperCase()),t.join(i.value?"":"+")},bindings:o,isInputFocused:d}}},998:function(e,t,r){"use strict";r.d(t,{D:function(){return o}}),r("42464");var a=r("86367"),n=r("26463");function o(e,t){let r=(0,a.iH)(!1),o=(0,a.iH)(null),l=null,i=null;function s(){if(!!e.value)(l=new EventSource(`/api/reviews/${e.value}/events`)).onopen=()=>{r.value=!0,console.log("[SSE] Connected")},l.addEventListener("connected",e=>{try{var r;let a=JSON.parse(e.data);o.value=e.lastEventId,null===(r=t.onConnected)||void 0===r||r.call(t,a),console.log("[SSE] Received connected event")}catch(e){console.error("[SSE] Failed to parse connected event:",e)}}),l.addEventListener("status_changed",e=>{try{var r;let a=JSON.parse(e.data);o.value=e.lastEventId,null===(r=t.onStatusChanged)||void 0===r||r.call(t,a),console.log("[SSE] Status changed:",a.previousStatus,"->",a.status)}catch(e){console.error("[SSE] Failed to parse status_changed event:",e)}}),l.addEventListener("version_updated",e=>{try{var r;let a=JSON.parse(e.data);o.value=e.lastEventId,null===(r=t.onVersionUpdated)||void 0===r||r.call(t,a),console.log("[SSE] Version updated:",a.version.versionHash.substring(0,8))}catch(e){console.error("[SSE] Failed to parse version_updated event:",e)}}),l.addEventListener("questions_updated",e=>{try{var r;let a=JSON.parse(e.data);o.value=e.lastEventId,null===(r=t.onQuestionsUpdated)||void 0===r||r.call(t,a),console.log("[SSE] Questions updated:",a.questions.length,"questions")}catch(e){console.error("[SSE] Failed to parse questions_updated event:",e)}}),l.addEventListener("heartbeat",e=>{o.value=e.lastEventId}),l.onerror=e=>{var a;r.value=!1,console.warn("[SSE] Connection error, will reconnect..."),null===(a=t.onError)||void 0===a||a.call(t,e),null==l||l.close(),l=null,i&&clearTimeout(i),i=window.setTimeout(()=>{console.log("[SSE] Reconnecting..."),s()},3e3)}}function d(){i&&(clearTimeout(i),i=null),l&&(l.close(),l=null,r.value=!1,console.log("[SSE] Disconnected"))}return(0,n.bv)(()=>{e.value&&s()}),(0,n.Ah)(()=>{d()}),{isConnected:r,lastEventId:o,connect:s,disconnect:d}}},99505:function(e,t,r){"use strict";var a=r("35818");r("3539");var n=r("94542");(0,a.ri)(n.Z).mount("#app")},67579:function(e,t,r){"use strict";r.r(e.exports={})},83177:function(e,t,r){"use strict";r.r(e.exports={})},3539:function(e,t,r){"use strict";r.r(e.exports={})},84286:function(e,t,r){"use strict";r.r(e.exports={})},37988:function(e,t,r){"use strict";r.r(e.exports={})}},v={};function g(e){var t=v[e];if(void 0!==t)return t.exports;var r=v[e]={exports:{}};return p[e].call(r.exports,r,r.exports,g),r.exports}g.m=p,g.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return g.d(t,{a:t}),t},g.d=function(e,t){for(var r in t)g.o(t,r)&&!g.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},g.f={},g.e=function(e){return Promise.all(Object.keys(g.f).reduce(function(t,r){return g.f[r](e,t),t},[]))},g.k=function(e){return""+e+".css"},g.u=function(e){return"static/js/async/"+e+"."+({10:"8d9699bc",115:"06e0c83c",12:"637ded5e",204:"a6d8faf7",213:"2d8c0752",232:"d2c3f6c6",25:"9a78cc63",292:"90101afa",294:"22a29240",304:"5cf80e6e",329:"380d4841",349:"f06ab6df",390:"532950b2",455:"b37347f9",460:"30707ecb",464:"6c511222",506:"f3db5235",508:"25cff55a",58:"e9f6fb59",593:"0bb61ab3",598:"a7cc2306",6:"79ec695c",629:"98e37088",634:"20a0a02a",678:"283c15ca",692:"e8a881a9",721:"0604b15a",777:"41aa2902",808:"99e6b41c",828:"561fbaed",838:"5cdee16d",852:"f1abc1c3",872:"1b1e6505",877:"1270c783",915:"639a0d7c",926:"cb291bf3",929:"a0ef4363",933:"886131dd",966:"fc3947f8",969:"1a949995"})[e]+".js"},g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),g.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="client:",g.l=function(r,a,n,o){if(e[r]){e[r].push(a);return}if(void 0!==n){for(var l,i,s=document.getElementsByTagName("script"),d=0;d<s.length;d++){var u=s[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){l=u;break}}}!l&&(i=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,g.nc&&l.setAttribute("nonce",g.nc),l.setAttribute("data-webpack",t+n),l.src=r),e[r]=[a];var c=function(t,a){l.onerror=l.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach(function(e){return e(a)}),t)return t(a)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=c.bind(null,l.onerror),l.onload=c.bind(null,l.onload),i&&document.head.appendChild(l)},g.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r=[],g.O=function(e,t,a,n){if(t){n=n||0;for(var o=r.length;o>0&&r[o-1][2]>n;o--)r[o]=r[o-1];r[o]=[t,a,n];return}for(var l=1/0,o=0;o<r.length;o++){for(var t=r[o][0],a=r[o][1],n=r[o][2],i=!0,s=0;s<t.length;s++)l>=n&&Object.keys(g.O).every(function(e){return g.O[e](t[s])})?t.splice(s--,1):(i=!1,n<l&&(l=n));if(i){r.splice(o--,1);var d=a();void 0!==d&&(e=d)}}return e},g.p="/",a={126:0,139:0,656:0,707:0},n="client",o="data-webpack-loading",l=function(e,t,r,a){var l,i,s="chunk-"+e;if(!a){for(var d=document.getElementsByTagName("link"),u=0;u<d.length;u++){var c=d[u],p=c.getAttribute("href")||c.href;if(p&&!p.startsWith(g.p)&&(p=g.p+(p.startsWith("/")?p.slice(1):p)),"stylesheet"==c.rel&&(p&&p.startsWith(t)||c.getAttribute("data-webpack")==n+":"+s)){l=c;break}}if(!r)return l}!l&&(i=!0,(l=document.createElement("link")).setAttribute("data-webpack",n+":"+s),l.setAttribute(o,1),l.rel="stylesheet",l.href=t);var v=function(e,t){if(l.onerror=l.onload=null,l.removeAttribute(o),clearTimeout(m),t&&"load"!=t.type&&l.parentNode.removeChild(l),r(t),e)return e(t)};if(l.getAttribute(o)){var m=setTimeout(v.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=v.bind(null,l.onerror),l.onload=v.bind(null,l.onload)}else v(void 0,{type:"load",target:l});return a?a.parentNode.insertBefore(l,a):i&&document.head.appendChild(l),l},g.f.css=function(e,t){var r=g.o(a,e)?a[e]:void 0;if(0!==r){if(r)t.push(r[2]);else if(980==e){var n=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=n);var o=g.p+g.k(e),i=Error();l(e,o,function(t){if(g.o(a,e)&&(0!==(r=a[e])&&(a[e]=void 0),r)){if("load"!==t.type){var n=t&&t.type,o=t&&t.target&&t.target.src;i.message="Loading css chunk "+e+" failed.\n("+n+": "+o+")",i.name="ChunkLoadError",i.type=n,i.request=o,r[1](i)}else r[0]()}})}else a[e]=0}},i=function(e,t){var r=t[0];e&&e(t);for(var n=0;n<r.length;n++)void 0===a[r[n]]&&(a[r[n]]=0)},(s=self.webpackChunkclient=self.webpackChunkclient||[]).forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s)),d={980:0},g.f.j=function(e,t){var r=g.o(d,e)?d[e]:void 0;if(0!==r){if(r)t.push(r[2]);else{var a=new Promise(function(t,a){r=d[e]=[t,a]});t.push(r[2]=a);var n=g.p+g.u(e),o=Error();g.l(n,function(t){if(g.o(d,e)&&(0!==(r=d[e])&&(d[e]=void 0),r)){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",o.name="ChunkLoadError",o.type=a,o.request=n,r[1](o)}},"chunk-"+e,e)}}},g.O.j=function(e){return 0===d[e]},u=function(e,t){var r=t[0],a=t[1],n=t[2],o,l,i=0;if(r.some(function(e){return 0!==d[e]})){for(o in a)g.o(a,o)&&(g.m[o]=a[o]);if(n)var s=n(g)}for(e&&e(t);i<r.length;i++)l=r[i],g.o(d,l)&&d[l]&&d[l][0](),d[l]=0;return g.O(s)},(c=self.webpackChunkclient=self.webpackChunkclient||[]).forEach(u.bind(null,0)),c.push=u.bind(null,c.push.bind(c));var m=g.O(void 0,["707","126","139","656"],function(){return g("99505")});g.O(m)}();